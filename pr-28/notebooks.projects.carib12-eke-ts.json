{"version":3,"kind":"Notebook","sha256":"8c87fdbc66cc2424d99a4d8b17513bc451821ae0f624494d5e0bf79cf38f6816","slug":"notebooks.projects.carib12-eke-ts","location":"/notebooks/projects/CARIB12_EKE_TS.ipynb","dependencies":[],"frontmatter":{"title":"Calculate EKE for CARIB12","content_includes_title":false,"kernelspec":{"name":"npl-2025b","display_name":"NPL 2025b","language":"python"},"github":"https://github.com/CROCODILE-CESM/CrocoGallery","numbering":{"title":{"offset":1}},"source_url":"https://github.com/CROCODILE-CESM/CrocoGallery/blob/HEAD/gallery/notebooks/projects/CARIB12_EKE_TS.ipynb","edit_url":"https://github.com/CROCODILE-CESM/CrocoGallery/edit/HEAD/gallery/notebooks/projects/CARIB12_EKE_TS.ipynb","exports":[{"format":"ipynb","filename":"CARIB12_EKE_TS.ipynb","url":"/CrocoGallery/build/CARIB12_EKE_TS-b3c93ed773ac6bcbd8fbd40492ee43e1.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport xgcm as xgcm\nimport numpy as np\nimport gsw\nimport cmocean as cm\nimport matplotlib.pyplot as plt\nimport cartopy\nimport cartopy.crs as ccrs\nimport cartopy.feature as cfeature\n\nimport warnings\nwarnings.filterwarnings('ignore')","key":"MkVQitYWmH"},{"type":"outputs","id":"1eOtvty8cflhMLEnE3Pmu","children":[],"key":"Ea2gjkzFXq"}],"key":"gUtuCGRb9p"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In this notebook...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"H77hi0p2mm"}],"identifier":"in-this-notebook","label":"In this notebook...","html_id":"in-this-notebook","implicit":true,"key":"Ddv0yGphcq"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"You will examine output from the CARIB12 simulation or a CARIB12 simulation of your own. The notebook focuses n two simple analyses relevant to model development and validation: ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nB6KoQN2oY"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ixYJHGog2D"},{"type":"text","value":"1- Calculating and plotting Eddy Kinetic Energy to examine mesoscale variability of flow. ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iRYvjC2uti"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NaoCzdF4ms"},{"type":"text","value":"2- Plotting a Temperature-Salinity diagram to examine water mass properties.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ValpWXGXq8"}],"key":"Rw6bioGkey"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"You will either access the original CARIB12 simulation output or recreate your own CARIB12 simulation using CROCODASH.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Wbx9MlqQev"}],"key":"dEMGyhhOhf"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"There are several prompts along the notebook to complete the analysis with a comparisson to GLORYS reanlaysis data.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"VcOqsGvTgg"}],"key":"DRXfGlNzeT"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"You can use the NPL 2025b environment for this notebook.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"TIHzEpMebT"}],"key":"SNUZeAPILQ"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"link","url":"https://gmd.copernicus.org/articles/17/8989/2024/gmd-17-8989-2024.html","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Seijo-Ellis, G., Giglio, D., Marques, G., & Bryan, F. (2024). CARIB12: a regional Community Earth System Model/Modular Ocean Model 6 configuration of the Caribbean Sea. Geoscientific Model Development, 17(24), 8989-9021","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"uzm78JRYWK"}],"urlSource":"https://gmd.copernicus.org/articles/17/8989/2024/gmd-17-8989-2024.html","key":"ChS7O2PPFz"}],"key":"m6y18ek6kS"}],"key":"hrveZWpnxM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Inputs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xNIRjEpXX8"}],"identifier":"inputs","label":"Inputs","html_id":"inputs","implicit":true,"key":"NX7QGdgqUY"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"if using the original CARIB12 output, you do not need to change any paths or file names in this notebook. If you have configured and completed your own CARIB12 simulation you will need to update the paths and filenmae accordingly.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"PjetKJs3js"}],"key":"XMb1McGUWl"}],"key":"o5VhXzpqyr"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#--- Path to where the model output is located:\nparent_dir = '/glade/derecho/scratch/gseijo/FROM_CHEYENNE/CARIB_012.SMAG.001/run/'\n","key":"BExfaBMqzW"},{"type":"outputs","id":"Q4DKKaL03E1QkHbNMnXBd","children":[],"key":"aczIhVgUcm"}],"key":"pK9p53SeQF"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#--- load daily data for 1 month of simulation to calculate EKE:\nds = xr.open_dataset(parent_dir + 'CARIB_12.SMAG.001.mom6.sfc.2017-09.nc',decode_timedelta=True)","key":"WR7P0IB4Ln"},{"type":"outputs","id":"wgae0jHK0r_jko0p7xwpq","children":[],"key":"dVVNuyiCXz"}],"key":"hNJ0IP8fgO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ds","key":"QSKHQgExQ7"},{"type":"outputs","id":"2ZeI4DJtZi5cKpVjDS_yn","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"dddafba8b7017cfa5204cc51cdcb6cb6","path":"/CrocoGallery/build/dddafba8b7017cfa5204cc51cdcb6cb6.html"},"text/plain":{"content":"<xarray.Dataset> Size: 541MB\nDimensions:       (time: 30, yh: 457, xh: 759, xq: 760, yq: 458, nbnd: 2)\nCoordinates:\n  * xh            (xh) float64 6kB -98.46 -98.38 -98.29 ... -35.71 -35.62 -35.54\n  * yh            (yh) float64 4kB -5.958 -5.875 -5.792 ... 31.79 31.88 31.96\n  * time          (time) datetime64[ns] 240B 2017-08-30T12:00:00 ... 2017-09-...\n  * nbnd          (nbnd) float64 16B 1.0 2.0\n  * xq            (xq) float64 6kB -98.5 -98.42 -98.33 ... -35.67 -35.58 -35.5\n  * yq            (yq) float64 4kB -6.0 -5.917 -5.834 ... 31.83 31.92 32.0\nData variables: (12/17)\n    lrunoff       (time, yh, xh) float32 42MB ...\n    SSH           (time, yh, xh) float32 42MB ...\n    tos           (time, yh, xh) float32 42MB ...\n    sos           (time, yh, xh) float32 42MB ...\n    SSU           (time, yh, xq) float32 42MB ...\n    SSV           (time, yq, xh) float32 42MB ...\n    ...            ...\n    mlotst        (time, yh, xh) float32 42MB ...\n    oml           (time, yh, xh) float32 42MB ...\n    average_T1    (time) datetime64[ns] 240B ...\n    average_T2    (time) datetime64[ns] 240B ...\n    average_DT    (time) timedelta64[ns] 240B ...\n    time_bounds   (time, nbnd) datetime64[ns] 480B ...\nAttributes:\n    NumFilesInSet:     1\n    title:             MOM6 diagnostic fields table for CESM case: CARIB_12.S...\n    associated_files:  area_t: CARIB_12.SMAG.001.mom6.static.nc\n    grid_type:         regular\n    grid_tile:         N/A","content_type":"text/plain"}}},"children":[],"key":"A5nX9i9AF1"}],"key":"f175vi7dXr"}],"key":"IXjVldtvNP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Eddy Kinetic Energy","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"soutrBqwja"}],"identifier":"eddy-kinetic-energy","label":"Eddy Kinetic Energy","html_id":"eddy-kinetic-energy","implicit":true,"key":"U7XGVmgqrn"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We will calculate EKE using Reynold’s decomposition of the velocity field:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ro4Dk89eoz"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ISPbZRmocW"},{"type":"inlineMath","value":"EKE = (\\frac{1}{2})(u^{\\prime2} + v^{\\prime2})","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>K</mi><mi>E</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><msup><mi>u</mi><mrow><mo mathvariant=\"normal\">′</mo><mn>2</mn></mrow></msup><mo>+</mo><msup><mi>v</mi><mrow><mo mathvariant=\"normal\">′</mo><mn>2</mn></mrow></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">EKE = (\\frac{1}{2})(u^{\\prime2} + v^{\\prime2})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">u</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′2</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>","key":"qg6hrBPJK0"},{"type":"text","value":" ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"euaAvpGu7J"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"T7Gz1vuGVW"},{"type":"inlineMath","value":"u = \\overline{u} + u^{\\prime}","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi><mo>=</mo><mover accent=\"true\"><mi>u</mi><mo stretchy=\"true\">‾</mo></mover><mo>+</mo><msup><mi>u</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">u = \\overline{u} + u^{\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7139em;vertical-align:-0.0833em;\"></span><span class=\"mord overline\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6306em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">u</span></span></span><span style=\"top:-3.5506em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">u</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span>","key":"uM9dC0kCZ6"},{"type":"text","value":" and ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Ep5kI4GhY5"},{"type":"inlineMath","value":"v = \\overline{v} + v^{\\prime}","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo>=</mo><mover accent=\"true\"><mi>v</mi><mo stretchy=\"true\">‾</mo></mover><mo>+</mo><msup><mi>v</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">v = \\overline{v} + v^{\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7139em;vertical-align:-0.0833em;\"></span><span class=\"mord overline\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6306em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span><span style=\"top:-3.5506em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span>","key":"chkUEF49Fy"},{"type":"text","value":",","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"eCtZeOBR71"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"PZMzioqJM5"},{"type":"text","value":"where ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"HFTj1INA8P"},{"type":"inlineMath","value":"\\overline{u}","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>u</mi><mo stretchy=\"true\">‾</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\overline{u}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6306em;\"></span><span class=\"mord overline\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6306em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">u</span></span></span><span style=\"top:-3.5506em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span></span></span></span></span></span></span>","key":"LwIGJV1GSQ"},{"type":"text","value":" and ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"LOXhz6jDXV"},{"type":"inlineMath","value":"\\overline{v}","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>v</mi><mo stretchy=\"true\">‾</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\overline{v}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6306em;\"></span><span class=\"mord overline\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6306em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span><span style=\"top:-3.5506em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span></span></span></span></span></span></span>","key":"G45eR75lNq"},{"type":"text","value":" are the time averaged zonal and meridional velocities and, ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"dPOi9CZmFr"},{"type":"inlineMath","value":"u^{\\prime}","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>u</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">u^{\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">u</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span>","key":"JENpXxkeMT"},{"type":"text","value":" and  ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kwNbrWua1a"},{"type":"inlineMath","value":"v^{\\prime}","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>v</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">v^{\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span>","key":"vlCcAY0ibJ"},{"type":"text","value":" the corresponding anomalies.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"hmWkfJ83D3"}],"key":"RT0QvPaNVs"}],"key":"kFejV94hQF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Remapping velocities","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MGPKQwnDb9"}],"identifier":"remapping-velocities","label":"Remapping velocities","html_id":"remapping-velocities","implicit":true,"key":"udXtoSycBK"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"On a Arakawa C-grid, the velocities are calculated on cell faces ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"iCZsrwLZYn"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"oW87NW3Fgj"},{"type":"text","value":"Here, we use xgcm to remap the velocities to the cell centers:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"zlzAbBuVLK"}],"key":"cPQ91SHgbD"}],"key":"KqV9d2j74b"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#--- use xGCM to remap u,v to cell center:\ngrid = xgcm.Grid(ds, coords={'X': {'center': 'xh', 'outer': 'xq'},\n                         'Y': {'center': 'yh', 'outer': 'yq'},})\n\nds['u_c'] = grid.interp(ds['SSU'],'X',boundary='fill')\nds['v_c'] = grid.interp(ds['SSV'],'Y',boundary='fill')","key":"OXDiKdLdTi"},{"type":"outputs","id":"o3pjRDB2b3y_pGONPa9gf","children":[],"key":"LpUxGWMSLW"}],"key":"KmsBoos39h"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ds","key":"b3MyCxraML"},{"type":"outputs","id":"CSsyyGPAflN_3IOIFx_DL","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"3aef797814f829b2433afedbd9c40168","path":"/CrocoGallery/build/3aef797814f829b2433afedbd9c40168.html"},"text/plain":{"content":"<xarray.Dataset> Size: 625MB\nDimensions:       (time: 30, yh: 457, xh: 759, xq: 760, yq: 458, nbnd: 2)\nCoordinates:\n  * xh            (xh) float64 6kB -98.46 -98.38 -98.29 ... -35.71 -35.62 -35.54\n  * yh            (yh) float64 4kB -5.958 -5.875 -5.792 ... 31.79 31.88 31.96\n  * time          (time) datetime64[ns] 240B 2017-08-30T12:00:00 ... 2017-09-...\n  * nbnd          (nbnd) float64 16B 1.0 2.0\n  * xq            (xq) float64 6kB -98.5 -98.42 -98.33 ... -35.67 -35.58 -35.5\n  * yq            (yq) float64 4kB -6.0 -5.917 -5.834 ... 31.83 31.92 32.0\nData variables: (12/19)\n    lrunoff       (time, yh, xh) float32 42MB ...\n    SSH           (time, yh, xh) float32 42MB ...\n    tos           (time, yh, xh) float32 42MB ...\n    sos           (time, yh, xh) float32 42MB ...\n    SSU           (time, yh, xq) float32 42MB nan nan nan ... -0.07437 -0.1082\n    SSV           (time, yq, xh) float32 42MB nan nan nan ... 0.08658 0.1206\n    ...            ...\n    average_T1    (time) datetime64[ns] 240B ...\n    average_T2    (time) datetime64[ns] 240B ...\n    average_DT    (time) timedelta64[ns] 240B ...\n    time_bounds   (time, nbnd) datetime64[ns] 480B ...\n    u_c           (time, yh, xh) float32 42MB nan nan nan ... -0.081 -0.0913\n    v_c           (time, yh, xh) float32 42MB nan nan nan ... 0.0772 0.1277\nAttributes:\n    NumFilesInSet:     1\n    title:             MOM6 diagnostic fields table for CESM case: CARIB_12.S...\n    associated_files:  area_t: CARIB_12.SMAG.001.mom6.static.nc\n    grid_type:         regular\n    grid_tile:         N/A","content_type":"text/plain"}}},"children":[],"key":"jc7w9mdhyy"}],"key":"QFRdPiTZ2R"}],"key":"BOoxLbis1p"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculate EKE","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RUjvRi1FJy"}],"identifier":"calculate-eke","label":"Calculate EKE","html_id":"calculate-eke","implicit":true,"key":"M4VyeXKhHd"}],"key":"uxceM86CLT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def calculate_eke(ds):\n    ''' this function calculates EKE. It assumes the input dataset has\n    both zonal (u_c) and meridional (v_c) velocities remapped to cell centers in it. It will output a data array with EKE.\n    Inputs: ds     --->  dataset with u_c and v_c variables.\n    Outputs: da_eke ---> EKE in a data array\n    '''\n    #--- get mean velocities:\n    u_ave = ds['u_c'].mean(dim='time')\n    v_ave = ds['v_c'].mean(dim='time')\n    #--- get anomalies:\n    u_anom = ds['u_c'] - u_ave\n    v_anom = ds['v_c'] - v_ave\n    #--- get EKE:\n    da_eke = 0.5 * (u_anom**2 + v_anom**2)\n\n    return da_eke\n    \n    ","key":"PLuJJM2NWv"},{"type":"outputs","id":"UpRBXVG_UEDgDAfH6hoUu","children":[],"key":"V0JURROHeD"}],"key":"ZCSXQeKiWi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"EKE = calculate_eke(ds)\nEKE","key":"A4TmnvHrKA"},{"type":"outputs","id":"mexg7viXXAVQiSVxnp2qp","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (time: 30, yh: 457, xh: 759)&gt; Size: 42MB\narray([[[       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        ...,\n        [       nan,        nan,        nan, ..., 0.00098866,\n         0.00040534, 0.00437429],\n        [       nan,        nan,        nan, ..., 0.00062077,\n         0.00029977, 0.00374894],\n        [       nan,        nan,        nan, ..., 0.00261818,\n         0.00240614, 0.0062713 ]],\n\n       [[       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n...\n        [       nan,        nan,        nan, ..., 0.00233022,\n         0.00252667, 0.01058662],\n        [       nan,        nan,        nan, ..., 0.00250139,\n         0.00290087, 0.00900356],\n        [       nan,        nan,        nan, ..., 0.00863691,\n         0.00783997, 0.0112587 ]],\n\n       [[       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        ...,\n        [       nan,        nan,        nan, ..., 0.00427083,\n         0.00368627, 0.01513929],\n        [       nan,        nan,        nan, ..., 0.00376044,\n         0.00353341, 0.01368239],\n        [       nan,        nan,        nan, ..., 0.00660955,\n         0.0057317 , 0.0123656 ]]], dtype=float32)\nCoordinates:\n  * xh       (xh) float64 6kB -98.46 -98.38 -98.29 ... -35.71 -35.62 -35.54\n  * yh       (yh) float64 4kB -5.958 -5.875 -5.792 -5.709 ... 31.79 31.88 31.96\n  * time     (time) datetime64[ns] 240B 2017-08-30T12:00:00 ... 2017-09-28T12...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 30</li><li><span class='xr-has-index'>yh</span>: 457</li><li><span class='xr-has-index'>xh</span>: 759</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-e02052cd-d049-4755-b14c-90960b190f3b' class='xr-array-in' type='checkbox' checked><label for='section-e02052cd-d049-4755-b14c-90960b190f3b' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>nan nan nan nan nan nan ... 0.005628 0.005622 0.00661 0.005732 0.01237</span></div><div class='xr-array-data'><pre>array([[[       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        ...,\n        [       nan,        nan,        nan, ..., 0.00098866,\n         0.00040534, 0.00437429],\n        [       nan,        nan,        nan, ..., 0.00062077,\n         0.00029977, 0.00374894],\n        [       nan,        nan,        nan, ..., 0.00261818,\n         0.00240614, 0.0062713 ]],\n\n       [[       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n...\n        [       nan,        nan,        nan, ..., 0.00233022,\n         0.00252667, 0.01058662],\n        [       nan,        nan,        nan, ..., 0.00250139,\n         0.00290087, 0.00900356],\n        [       nan,        nan,        nan, ..., 0.00863691,\n         0.00783997, 0.0112587 ]],\n\n       [[       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        ...,\n        [       nan,        nan,        nan, ..., 0.00427083,\n         0.00368627, 0.01513929],\n        [       nan,        nan,        nan, ..., 0.00376044,\n         0.00353341, 0.01368239],\n        [       nan,        nan,        nan, ..., 0.00660955,\n         0.0057317 , 0.0123656 ]]], dtype=float32)</pre></div></div></li><li class='xr-section-item'><input id='section-496964fa-5e3d-4db0-bb7b-ea96e691da64' class='xr-section-summary-in' type='checkbox'  checked><label for='section-496964fa-5e3d-4db0-bb7b-ea96e691da64' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>xh</span></div><div class='xr-var-dims'>(xh)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-98.46 -98.38 ... -35.62 -35.54</div><input id='attrs-dc4b7d9a-aa99-4977-825c-02ceacd15390' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-dc4b7d9a-aa99-4977-825c-02ceacd15390' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0c7247c3-8608-4195-b143-9a5a47da2178' class='xr-var-data-in' type='checkbox'><label for='data-0c7247c3-8608-4195-b143-9a5a47da2178' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>h point nominal longitude</dd><dt><span>axis :</span></dt><dd>X</dd></dl></div><div class='xr-var-data'><pre>array([-98.458498, -98.375494, -98.29249 , ..., -35.70751 , -35.624506,\n       -35.541502])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>yh</span></div><div class='xr-var-dims'>(yh)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-5.958 -5.875 ... 31.88 31.96</div><input id='attrs-6d290b21-569c-4b28-94f9-3bf63cdd9ef5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6d290b21-569c-4b28-94f9-3bf63cdd9ef5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fbe7e1c7-b262-47df-998f-5725ef58d6bc' class='xr-var-data-in' type='checkbox'><label for='data-fbe7e1c7-b262-47df-998f-5725ef58d6bc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>h point nominal latitude</dd><dt><span>axis :</span></dt><dd>Y</dd></dl></div><div class='xr-var-data'><pre>array([-5.958425, -5.875274, -5.792123, ..., 31.792123, 31.875274, 31.958425])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2017-08-30T12:00:00 ... 2017-09-...</div><input id='attrs-3430fad6-41ae-4df2-a679-ae460612f420' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3430fad6-41ae-4df2-a679-ae460612f420' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6f6c2874-be14-46e3-a641-5545193ddcd3' class='xr-var-data-in' type='checkbox'><label for='data-6f6c2874-be14-46e3-a641-5545193ddcd3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>bounds :</span></dt><dd>time_bounds</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2017-08-30T12:00:00.000000000&#x27;, &#x27;2017-08-31T12:00:00.000000000&#x27;,\n       &#x27;2017-09-01T12:00:00.000000000&#x27;, &#x27;2017-09-02T12:00:00.000000000&#x27;,\n       &#x27;2017-09-03T12:00:00.000000000&#x27;, &#x27;2017-09-04T12:00:00.000000000&#x27;,\n       &#x27;2017-09-05T12:00:00.000000000&#x27;, &#x27;2017-09-06T12:00:00.000000000&#x27;,\n       &#x27;2017-09-07T12:00:00.000000000&#x27;, &#x27;2017-09-08T12:00:00.000000000&#x27;,\n       &#x27;2017-09-09T12:00:00.000000000&#x27;, &#x27;2017-09-10T12:00:00.000000000&#x27;,\n       &#x27;2017-09-11T12:00:00.000000000&#x27;, &#x27;2017-09-12T12:00:00.000000000&#x27;,\n       &#x27;2017-09-13T12:00:00.000000000&#x27;, &#x27;2017-09-14T12:00:00.000000000&#x27;,\n       &#x27;2017-09-15T12:00:00.000000000&#x27;, &#x27;2017-09-16T12:00:00.000000000&#x27;,\n       &#x27;2017-09-17T12:00:00.000000000&#x27;, &#x27;2017-09-18T12:00:00.000000000&#x27;,\n       &#x27;2017-09-19T12:00:00.000000000&#x27;, &#x27;2017-09-20T12:00:00.000000000&#x27;,\n       &#x27;2017-09-21T12:00:00.000000000&#x27;, &#x27;2017-09-22T12:00:00.000000000&#x27;,\n       &#x27;2017-09-23T12:00:00.000000000&#x27;, &#x27;2017-09-24T12:00:00.000000000&#x27;,\n       &#x27;2017-09-25T12:00:00.000000000&#x27;, &#x27;2017-09-26T12:00:00.000000000&#x27;,\n       &#x27;2017-09-27T12:00:00.000000000&#x27;, &#x27;2017-09-28T12:00:00.000000000&#x27;],\n      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-bf75fe28-7a5f-4b0a-8467-4101f1a76726' class='xr-section-summary-in' type='checkbox'  ><label for='section-bf75fe28-7a5f-4b0a-8467-4101f1a76726' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>xh</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-240bc9b0-363b-43a4-8f7d-5561ac5f2e5d' class='xr-index-data-in' type='checkbox'/><label for='index-240bc9b0-363b-43a4-8f7d-5561ac5f2e5d' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ -98.45849802371544,  -98.37549407114625,  -98.29249011857706,\n        -98.20948616600788,  -98.12648221343875,  -98.04347826086956,\n        -97.96047430830038,  -97.87747035573125,  -97.79446640316206,\n        -97.71146245059288,\n       ...\n       -36.288537549407124,  -36.20553359683794,  -36.12252964426875,\n        -36.03952569169962,  -35.95652173913044,  -35.87351778656125,\n        -35.79051383399212, -35.707509881422936,  -35.62450592885375,\n       -35.541501976284565],\n      dtype=&#x27;float64&#x27;, name=&#x27;xh&#x27;, length=759))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>yh</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-7d2485ae-d944-4390-9107-a186c8b72494' class='xr-index-data-in' type='checkbox'/><label for='index-7d2485ae-d944-4390-9107-a186c8b72494' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ -5.958424507658644,   -5.87527352297593,  -5.792122538293216,\n        -5.708971553610503,   -5.62582056892779,  -5.542669584245077,\n        -5.459518599562365, -5.3763676148796495, -5.2932166301969374,\n       -5.2100656455142245,\n       ...\n         31.21006564551422,  31.293216630196937,  31.376367614879644,\n        31.459518599562365,  31.542669584245075,  31.625820568927796,\n          31.7089715536105,  31.792122538293206,  31.875273522975935,\n         31.95842450765864],\n      dtype=&#x27;float64&#x27;, name=&#x27;yh&#x27;, length=457))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-506d7caf-bf8e-49c6-8a22-18717342e738' class='xr-index-data-in' type='checkbox'/><label for='index-506d7caf-bf8e-49c6-8a22-18717342e738' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2017-08-30 12:00:00&#x27;, &#x27;2017-08-31 12:00:00&#x27;,\n               &#x27;2017-09-01 12:00:00&#x27;, &#x27;2017-09-02 12:00:00&#x27;,\n               &#x27;2017-09-03 12:00:00&#x27;, &#x27;2017-09-04 12:00:00&#x27;,\n               &#x27;2017-09-05 12:00:00&#x27;, &#x27;2017-09-06 12:00:00&#x27;,\n               &#x27;2017-09-07 12:00:00&#x27;, &#x27;2017-09-08 12:00:00&#x27;,\n               &#x27;2017-09-09 12:00:00&#x27;, &#x27;2017-09-10 12:00:00&#x27;,\n               &#x27;2017-09-11 12:00:00&#x27;, &#x27;2017-09-12 12:00:00&#x27;,\n               &#x27;2017-09-13 12:00:00&#x27;, &#x27;2017-09-14 12:00:00&#x27;,\n               &#x27;2017-09-15 12:00:00&#x27;, &#x27;2017-09-16 12:00:00&#x27;,\n               &#x27;2017-09-17 12:00:00&#x27;, &#x27;2017-09-18 12:00:00&#x27;,\n               &#x27;2017-09-19 12:00:00&#x27;, &#x27;2017-09-20 12:00:00&#x27;,\n               &#x27;2017-09-21 12:00:00&#x27;, &#x27;2017-09-22 12:00:00&#x27;,\n               &#x27;2017-09-23 12:00:00&#x27;, &#x27;2017-09-24 12:00:00&#x27;,\n               &#x27;2017-09-25 12:00:00&#x27;, &#x27;2017-09-26 12:00:00&#x27;,\n               &#x27;2017-09-27 12:00:00&#x27;, &#x27;2017-09-28 12:00:00&#x27;],\n              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-13cb41f7-c41c-4d09-b0ea-650f8bceb602' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-13cb41f7-c41c-4d09-b0ea-650f8bceb602' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"},"text/plain":{"content":"<xarray.DataArray (time: 30, yh: 457, xh: 759)> Size: 42MB\narray([[[       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        ...,\n        [       nan,        nan,        nan, ..., 0.00098866,\n         0.00040534, 0.00437429],\n        [       nan,        nan,        nan, ..., 0.00062077,\n         0.00029977, 0.00374894],\n        [       nan,        nan,        nan, ..., 0.00261818,\n         0.00240614, 0.0062713 ]],\n\n       [[       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n...\n        [       nan,        nan,        nan, ..., 0.00233022,\n         0.00252667, 0.01058662],\n        [       nan,        nan,        nan, ..., 0.00250139,\n         0.00290087, 0.00900356],\n        [       nan,        nan,        nan, ..., 0.00863691,\n         0.00783997, 0.0112587 ]],\n\n       [[       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        [       nan,        nan,        nan, ...,        nan,\n                nan,        nan],\n        ...,\n        [       nan,        nan,        nan, ..., 0.00427083,\n         0.00368627, 0.01513929],\n        [       nan,        nan,        nan, ..., 0.00376044,\n         0.00353341, 0.01368239],\n        [       nan,        nan,        nan, ..., 0.00660955,\n         0.0057317 , 0.0123656 ]]], dtype=float32)\nCoordinates:\n  * xh       (xh) float64 6kB -98.46 -98.38 -98.29 ... -35.71 -35.62 -35.54\n  * yh       (yh) float64 4kB -5.958 -5.875 -5.792 -5.709 ... 31.79 31.88 31.96\n  * time     (time) datetime64[ns] 240B 2017-08-30T12:00:00 ... 2017-09-28T12...","content_type":"text/plain"}}},"children":[],"key":"lGe8IioLwi"}],"key":"RHc4bjpeIA"}],"key":"BBeMrRb8Sy"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot time mean EKE","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DVeR9QI6kF"}],"identifier":"plot-time-mean-eke","label":"Plot time mean EKE","html_id":"plot-time-mean-eke","implicit":true,"key":"cBNNpk32XO"}],"key":"AJWagFToMm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#--- some plot params to play with:\nvmini = 0.0\nvmaxi = 0.15\ncolormap = 'turbo'\n\n#--- plot time mean EKE:\nfig, axs = plt.subplots(ncols = 1,figsize=(16, 5),subplot_kw=dict(projection=ccrs.PlateCarree()))\n\nc1 = EKE[:,:,:].mean(dim='time').plot.pcolormesh(vmin=vmini,vmax=vmaxi,cmap=colormap,transform=ccrs.PlateCarree(),add_colorbar = True,extend='max')\n\naxs.coastlines(color='k')\naxs.add_feature(cartopy.feature.LAND,color='gray')\naxs.set_facecolor('gray')\naxs.set_ylabel('')\naxs.set_xlabel('')\naxs.gridlines(color='k',linestyle=':',draw_labels=['left','bottom'], dms=True, x_inline=False, y_inline=False)\n_ = axs.set_title('Time mean EKE [$m^{2}/s^{2}$]',fontweight ='bold')\n","key":"mj2FbvVD2h"},{"type":"outputs","id":"PTOueBEDWLeWvCHGsYhtN","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f569bbabea2fd594fd38166bc625f285","path":"/CrocoGallery/build/f569bbabea2fd594fd38166bc625f285.png"},"text/plain":{"content":"<Figure size 1600x500 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"U3pgzGwI5R"}],"key":"ZPMkJ143Ti"}],"key":"srGxn4ob8r"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prompt","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Z4hxrwKpxK"}],"identifier":"prompt","label":"Prompt","html_id":"prompt","implicit":true,"key":"mDenCWADt7"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Import GLORYS data for the same time period and calculate the mean EKE.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"nctgn5J4qR"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"yWVNvAaiGY"},{"type":"text","value":"The GLORYS data can be found here: ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"EU3bv8DUUb"},{"type":"inlineMath","value":"/glade/campaign/collections/rda/data/d010049/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">/</mi><mi>g</mi><mi>l</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi mathvariant=\"normal\">/</mi><mi>c</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>a</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi mathvariant=\"normal\">/</mi><mi>c</mi><mi>o</mi><mi>l</mi><mi>l</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi mathvariant=\"normal\">/</mi><mi>r</mi><mi>d</mi><mi>a</mi><mi mathvariant=\"normal\">/</mi><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><mi mathvariant=\"normal\">/</mi><mi>d</mi><mn>010049</mn><mi mathvariant=\"normal\">/</mi></mrow><annotation encoding=\"application/x-tex\">/glade/campaign/collections/rda/data/d010049/</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">e</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">am</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">ai</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">n</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">co</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">ll</span><span class=\"mord mathnormal\">ec</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">a</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">d</span><span class=\"mord\">010049/</span></span></span></span>","key":"n5L7qSSDmR"},{"type":"text","value":" ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"SbU3JR6oBq"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"jZqrzYMYRw"},{"type":"text","value":"Alternatively, you can incorporate other datasets by leveraging other packages you have learned about this week.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kbalcpHAlc"}],"key":"cwJQDv6YeN"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Use xESMF to regrid both datasets to a common grid and compare the time mean EKE between CARIB12 and GLORYS.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"xYxPIY8pa1"}],"key":"yHplYCBAMd"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"What can you learn from comparing CARIB12 to the GLORYS reanalysis? ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"raYRk6JjRB"},{"type":"break","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"T5msEfD1F7"},{"type":"text","value":"How would it inform the development f the configuration?","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"DnDEyB4Icd"}],"key":"nCOxxyT7hh"}],"key":"WdF8dlsKf9"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Temperature - Salinity Diagram","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PHFM0IJvVf"}],"identifier":"temperature-salinity-diagram","label":"Temperature - Salinity Diagram","html_id":"temperature-salinity-diagram","implicit":true,"key":"UhennLqypO"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"if using the original CARIB12 output, you do not need to change any paths or file names in this notebook. If you have configured and completed your own CARIB12 simulation you will need to update the paths and filenmae accordingly.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TZfrT6SiUT"}],"key":"LXYO9KhZKF"}],"key":"iFuj9tXiMW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#--- load monthly mean 3D data of simulation to plot a T-S diagram:\nds = xr.open_dataset(parent_dir + 'CARIB_12.SMAG.001.mom6.hm.2017-09.nc',decode_timedelta=True)\nds","key":"cKUaUQx0Kw"},{"type":"outputs","id":"CI0zNcZHdeHOU156w0BTv","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":10,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"d4e7ca1dc8b963ee8d58c19d1f097dcd","path":"/CrocoGallery/build/d4e7ca1dc8b963ee8d58c19d1f097dcd.html"},"text/plain":{"content":"<xarray.Dataset> Size: 4GB\nDimensions:                         (time: 1, zl: 65, yh: 457, xq: 760,\n                                     yq: 458, xh: 759, zi: 66, scalar_axis: 1,\n                                     nbnd: 2)\nCoordinates:\n  * xq                              (xq) float64 6kB -98.5 -98.42 ... -35.5\n  * yh                              (yh) float64 4kB -5.958 -5.875 ... 31.96\n  * zl                              (zl) float64 520B 1.25 3.75 ... 5.876e+03\n  * time                            (time) datetime64[ns] 8B 2017-09-14\n  * nbnd                            (nbnd) float64 16B 1.0 2.0\n  * xh                              (xh) float64 6kB -98.46 -98.38 ... -35.54\n  * yq                              (yq) float64 4kB -6.0 -5.917 ... 31.92 32.0\n  * zi                              (zi) float64 528B 0.0 2.5 ... 6e+03\n  * scalar_axis                     (scalar_axis) float64 8B 0.0\nData variables: (12/65)\n    uo                              (time, zl, yh, xq) float32 90MB ...\n    vo                              (time, zl, yq, xh) float32 90MB ...\n    h                               (time, zl, yh, xh) float32 90MB ...\n    e                               (time, zi, yh, xh) float32 92MB ...\n    thetao                          (time, zl, yh, xh) float32 90MB ...\n    so                              (time, zl, yh, xh) float32 90MB ...\n    ...                              ...\n    opottempdiff                    (time, zl, yh, xh) float32 90MB ...\n    frazil_heat_tendency            (time, zl, yh, xh) float32 90MB ...\n    average_T1                      (time) datetime64[ns] 8B ...\n    average_T2                      (time) datetime64[ns] 8B ...\n    average_DT                      (time) timedelta64[ns] 8B ...\n    time_bounds                     (time, nbnd) datetime64[ns] 16B ...\nAttributes:\n    NumFilesInSet:     1\n    title:             MOM6 diagnostic fields table for CESM case: CARIB_12.S...\n    associated_files:  area_t: CARIB_12.SMAG.001.mom6.static.nc\n    grid_type:         regular\n    grid_tile:         N/A","content_type":"text/plain"}}},"children":[],"key":"nsLXGXwcMC"}],"key":"bonVBasYyN"}],"key":"RwcemtgpOf"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Potential Density","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"klABCupVSo"}],"identifier":"potential-density","label":"Potential Density","html_id":"potential-density","implicit":true,"key":"Xs8hS0420w"}],"key":"o9C5C4sllk"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#--- Get mean temperature and salinity profiles to simplify calculations for the demo:\nptemp = ds['thetao'].mean(dim='time').mean(dim=['xh','yh'])\nsalt  = ds['so'].mean(dim='time').mean(dim=['xh','yh'])","key":"bc2jw2MzPd"},{"type":"outputs","id":"FaK5Shhu22SNQbdWfzuFA","children":[],"key":"vzJZmqd664"}],"key":"nMG4WWV3NE"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prompt","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ApYBH9crDj"}],"identifier":"prompt","label":"Prompt","html_id":"prompt-1","implicit":true,"key":"rMko6pU7Xc"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The previous step does an area average without considering variation in the area of each cell. Repeat the previous step by implementing an area-weighted average computation.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"eMT5GGsvAh"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"hCfCd9KV4j"},{"type":"text","value":"The following example could be applied to this notebook:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"picFILpeoy"}],"key":"bNMAr0uAy7"},{"type":"code","lang":"","value":"weights = np.cos(np.deg2rad(data.lat))\nweights.name = \"weights\"\ndata_weighted = data.weighted(weights)\nweighted_mean = data_weighted.mean((\"lon\", \"lat\"))","position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"key":"ds3fjiHkyb"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"where “data” is a data array with dimensions “lon” and “lat” corresponding to longitudes and latitudes, respectively.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"TUcluWZ4l1"}],"key":"jDj2zKucKT"}],"key":"v6Siee0Cnh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#--- Compute sigma-theta (potential density anomaly, referenced to 0 dbar)\n#--- Need Absolute Salinity and Conservative Temperature for GSW\nTgrid = np.linspace(ptemp.min()-0.5, ptemp.max()+0.5, 50)\nSgrid = np.linspace(salt.min()-0.1, salt.max()+0.1, 50)\nSg, Tg = np.meshgrid(Sgrid, Tgrid)\n\nSA = gsw.SA_from_SP(Sg, p=0, lon=0, lat=0)\nCT = gsw.CT_from_pt(SA, Tg)\n\nsigma0 = gsw.sigma0(SA, CT) ","key":"dCuntsXRrk"},{"type":"outputs","id":"BRehbJpHXnbTcp89fBB20","children":[],"key":"gkmEw3YEZe"}],"key":"GaFUpS5Dzw"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot TS diagram with sigma contours","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PdkrFCGiZQ"}],"identifier":"plot-ts-diagram-with-sigma-contours","label":"Plot TS diagram with sigma contours","html_id":"plot-ts-diagram-with-sigma-contours","implicit":true,"key":"IJJRMBATkq"}],"key":"ahGQbyNGuj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.figure(figsize=(6,6))\n\n# Density contours\ncs = plt.contour(Sg, Tg, sigma0, colors='gray', linewidths=0.7)\nplt.clabel(cs, inline=True, fontsize=8, fmt=\"%.1f\")\n\n# Time- and space-mean profile colored by depth\nsc = plt.scatter(salt, ptemp, c=ptemp['zl'], vmin=0,vmax=2000,cmap='turbo_r')\nplt.colorbar(sc, label='Depth [m]')\n\nplt.xlabel(\"Salinity [PSU]\")\nplt.ylabel(\"Potential Temperature [°C]\")\nplt.title(\"Mean \" + r'$\\theta$' +\"-S Diagram\")\nplt.grid(True)\nplt.show()","key":"AKeYxKwPio"},{"type":"outputs","id":"ol3p19K8p2lelVQeHXYjx","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"35826a88ebf7230495a2658c6856adb9","path":"/CrocoGallery/build/35826a88ebf7230495a2658c6856adb9.png"},"text/plain":{"content":"<Figure size 600x600 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"b7bujkz20x"}],"key":"auyZtbnEP7"}],"key":"Jx23tmuPi2"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prompt","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"b1s1wnuA9M"}],"identifier":"prompt","label":"Prompt","html_id":"prompt-2","implicit":true,"key":"TXHRN1lqUO"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Repeat for GLORYS data and compare the vertical structure and water mass properties between the two datasets.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"UnZTifQ0Pp"}],"key":"s56hOl1LbQ"}],"key":"PJPJ2yxDxj"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Final Prompt","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mAsGcW4C2P"}],"identifier":"final-prompt","label":"Final Prompt","html_id":"final-prompt","implicit":true,"key":"FNEWAliD3Y"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Leveraging what you’ve learned throughout the workshop and this notebook, can you incorporate a similar analysis into CUPiD?","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VCwi7UBLNK"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pBGUxCBoOD"},{"type":"text","value":"Good luck!","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Mbs0CNn0kY"}],"key":"eaVzMi2S19"}],"key":"w2SLatZR1I"}],"key":"jnBYIQ9TOw"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Model-Observation comparison: use your own MOM6 run","url":"/notebooks/projects/model-obs-your-own-model-1","group":"Sample CrocoDash Projects"},"next":{"title":" Advanced CUPiD Tutorial ","url":"/notebooks/diagnostics/cupid-projects","group":"Sample CrocoDash Projects"}}},"domain":"http://localhost:3000"}
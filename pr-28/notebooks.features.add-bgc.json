{"version":3,"kind":"Notebook","sha256":"56699784fbc144317b4eda18fadc10449bf04a07030016dd9e9230cebb2e62c2","slug":"notebooks.features.add-bgc","location":"/notebooks/features/add_bgc.ipynb","dependencies":[],"frontmatter":{"title":"Run a coupled biogeochemistry (MARBL) & ocean (MOM6) model","content_includes_title":false,"github":"https://github.com/CROCODILE-CESM/CrocoGallery","numbering":{"title":{"offset":3}},"source_url":"https://github.com/CROCODILE-CESM/CrocoGallery/blob/HEAD/gallery/notebooks/features/add_bgc.ipynb","edit_url":"https://github.com/CROCODILE-CESM/CrocoGallery/edit/HEAD/gallery/notebooks/features/add_bgc.ipynb","exports":[{"format":"ipynb","filename":"add_bgc.ipynb","url":"/CrocoGallery/pr-28/build/add_bgc-47659edc0040d7878d1e57d676ff60cb.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":1,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"MARBL is part of the CESM","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ml9qYxum3k"}],"key":"AnSbW2eDix"}],"key":"TLXCeFuGWO"},{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add MARBL to the compset","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Gmc8Kdom3y"}],"key":"x0S7se8pH9"}],"key":"t3hqZWUjVX"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add relevant information to configure_forcingss","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hnI3VH7fhp"}],"key":"iEmSqEe9lU"}],"key":"nQ5uOugmVS"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"See below for an example.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Gb5sHDLJPb"}],"key":"Ad3bXGWpbS"}],"key":"WnEtqEuCwy"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Adding runoff to a BGC example and getting river nutrients requires an offline mapping. Add the GLOFAS runoff mesh as well as the river nutrients (which is on the GLOFAS grid)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"b3Mfojh7QV"}],"key":"FcZzNnRMZU"}],"key":"EIIUcD3IPe"}],"key":"jvOVYsidhI"}],"key":"EtvRcdO5kS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from CrocoDash.case import Case\ncase = Case(\n    cesmroot = cesmroot,\n    caseroot = caseroot,\n    inputdir = inputdir,\n    ocn_grid = grid,\n    ocn_vgrid = vgrid,\n    ocn_topo = topo,\n    project = 'NCGD0011',\n    override = True,\n    machine = \"derecho\",\n    compset = \"CR1850MARBL_JRA\"\n)","key":"h1SVaaRXAc"},{"type":"outputs","id":"l2Rx4YK8V7mQXYKHkUAZ8","children":[],"key":"HaKDxhK9wD"}],"key":"WyFP3q5CVA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"case.configure_forcings(\n    date_range = [\"2000-01-01 00:00:00\", \"2000-02-01 00:00:00\"],\n    data_input_path = \"\", # Path to CESM OUTPUT data\n    product_name = \"CESM_OUTPUT\",\n    marbl_ic_filepath = \"\" # Path to MARBL Global IC File\n)\n\n# For River Nutrients, which should be used when runoff is also on, add\n#    runoff_esmf_mesh_filepath = \"\", # For river nutrient mapping \n#    global_river_nutrients_filepath = \"\", # Path to global river nutrients mapping\n \n","key":"W2DdLDKXzt"},{"type":"outputs","id":"XMv4XLy_Qvvo7wci3jYOt","children":[],"key":"Co2pLhZiNe"}],"key":"kASn5gGXEA"},{"type":"block","kind":"notebook-content","children":[{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"co9fRN1jBi"}],"key":"q83zqpsMdb"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"If youâ€™re working on ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"aEDUcixcgv"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Derecho","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ylKqggJrWm"}],"key":"PbYp2vXPvY"},{"type":"text","value":" or ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"zpjOclxCJz"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Casper","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"IiGSfCwQVl"}],"key":"yQ9wDuOdfI"},{"type":"text","value":", you can use the following paths:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"tIQgNDSepM"}],"key":"LSJFbLeSVB"},{"type":"code","lang":"python","value":"data_input_path = \"/glade/campaign/collections/cmip/CMIP6/CESM-HR/FOSI_BGC/HR/g.e22.TL319_t13.G1850ECOIAF_JRA_HR.4p2z.001/ocn/proc/tseries/month_1\"\nproduct_name = \"CESM_OUTPUT\"\nrunoff_esmf_mesh_filepath = \"/glade/campaign/cesm/cesmdata/cseg/inputdata/ocn/mom/croc/rof/glofas/dis24/GLOFAS_esmf_mesh_v4.nc\"\nglobal_river_nutrients_filepath = \"/glade/campaign/cesm/cesmdata/cseg/inputdata/ocn/mom/croc/rof/river_nutrients/river_nutrients.GNEWS_GNM.glofas.20250916.64bit.nc\"\nmarbl_ic_filepath = \"/glade/campaign/collections/gdex/data/d651077/cesmdata/inputdata/ocn/mom/tx0.66v1/ecosys_jan_IC_omip_latlon_1x1_180W_c231221.nc\"","key":"iO0nxGirPW"}],"key":"b224JRrirQ"},{"type":"code","lang":"","value":"","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"pGR16r9v2b"}],"key":"NicdE5NdMj"}],"key":"Spct9zt7Ce"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Model-Observation comparison: use your own MOM6 run","url":"/notebooks/projects/model-obs-your-own-model","group":"Basic CrocoDash Tutorial"},"next":{"title":"Run a coupled sea ice (CICE) & ocean (MOM6) model","url":"/notebooks/features/add-cice","group":"Coupling Tutorials"}}},"domain":"http://localhost:3000"}
{"version":3,"kind":"Notebook","sha256":"ca2eed670b79038869a7f828654cd377de095893f43a828607e49e1294404af3","slug":"notebooks.features.add-chl","location":"/notebooks/features/add_chl.ipynb","dependencies":[],"frontmatter":{"title":"Add Chlorophyll Files to the Run","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"CrocoDash","language":"python"},"github":"https://github.com/CROCODILE-CESM/CrocoGallery","numbering":{"title":{"offset":3}},"source_url":"https://github.com/CROCODILE-CESM/CrocoGallery/blob/HEAD/gallery/notebooks/features/add_chl.ipynb","edit_url":"https://github.com/CROCODILE-CESM/CrocoGallery/edit/HEAD/gallery/notebooks/features/add_chl.ipynb","exports":[{"format":"ipynb","filename":"add_chl.ipynb","url":"/CrocoGallery/pr-28/build/add_chl-40764abf7a9493aacdce174e37d1cbca.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"MOM6 can take chlorophyll data as a file in the regional domain. It impacts shortwave penetration. MOM6 parameters that are impacted by it CHL_FROM_FILE, CHL_FILE, VAR_PEN_SW, and PEN_SW_NBANDS.\nIn our workflow, we take raw data from SeaWIFS, process it globally, and subset to our regional domain.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"N8XLZJs1tR"}],"key":"nhVRrKOHPG"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Chlorophyll can be added into a CrocoDash case, using functions from mom6_bathy and called from configure_forcings. There is one parameter in configure forcings and three parameters in MOM6","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"tI4LMDQo03"}],"key":"d8C3ww5dyN"},{"type":"admonition","kind":"caution","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Caution","key":"UwgaKV43Rn"}],"key":"nBm8Hy0lsB"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"This method does not do a great job of resolving chlorophyll in estuaries and similar features. If possible, the generated chlorophyll file should be replaced with a better product (which can be done by replacing the file in ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"DN9fQzUwdu"},{"type":"inlineCode","value":"CHL_FILE","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"GoL0vSX3vf"},{"type":"text","value":").","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"RHTyZDkA7M"}],"key":"s3JE7Ys3wx"}],"key":"FTPTAwPqUA"},{"type":"heading","depth":2,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"CrocoDash Parameters","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"svuoCLhjlq"}],"identifier":"crocodash-parameters","label":"CrocoDash Parameters","html_id":"crocodash-parameters","implicit":true,"key":"GgTncepk8Q"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"In case.configure_forcings(), the argument chl_processed_filepath takes in a processed global chlorophyll file. The global processed chlorophyll file is hosted on the CESM inputdata svn server under ocn/mom/croc/chl/data and can be accessed through the CrocoDash raw_data_access module like below:","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"mDGhgFZFNe"}],"key":"gBsNDa7f4h"}],"key":"vKK9ZSKi1I"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from CrocoDash.raw_data_access.datasets import seawifs as sw\nsw.get_processed_global_seawifs_script_for_cli(\n    output_dir=\"<insert_dir>\",\n    output_file=\"get_seawifs_data.sh\"\n)","key":"aiGZHe8iYu"},{"type":"outputs","id":"ISr-YxKbO6wZO3tKFN4QT","children":[],"key":"fX2KFvsMNX"}],"key":"SFNs7NBdrH"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The file path of the global file (after running the script from the code block) can be passed into configure forcings as shown in this demo","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eplHcUg1Bz"}],"key":"j8smXlzfh4"}],"key":"wvIIFI4ESW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"case.configure_forcings(\n    date_range = [\"2020-01-01 00:00:00\", \"2020-01-09 00:00:00\"],\n    chl_file = \"<CHL_PROCESSED>\",\n)","key":"GDPVhUrktq"},{"type":"outputs","id":"mVcu_e3B_fo8jwt_qXD4e","children":[],"key":"KYBbClwK6l"}],"key":"qT2ZqNcBdf"},{"type":"block","kind":"notebook-content","children":[{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"GEPjEp6dO6"}],"key":"Qs79sbxT3f"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"If youâ€™re working on ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"q9Qo9cDrY9"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Derecho","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"zwc13hUuMw"}],"key":"ZpSBd8fFV6"},{"type":"text","value":" or ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"zC7aF2DETT"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Casper","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kcBpJNZ792"}],"key":"d8RsyAYQms"},{"type":"text","value":", you can use the following paths:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"SvZbSXdlEP"}],"key":"CqaxXxEPgA"},{"type":"code","lang":"python","value":"chl_file: /glade/campaign/cesm/cesmdata/cseg/inputdata/ocn/mom/croc/chl/data/SeaWIFS.L3m.MC.CHL.chlor_a.0.25deg.nc","key":"yRKgMOc03M"}],"key":"r6uw9t7oTs"},{"type":"code","lang":"","value":"","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"wFLkQKhpvD"}],"key":"NPPopvn0nC"}],"key":"E1Vt5QeZx7"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Adding your own runoff product to the CESM (Advanced)","url":"/notebooks/features/add-runoff-product","group":"Additional Component Tutorials"},"next":{"title":"Add Boundary Tides to the Run","url":"/notebooks/features/add-tides","group":"Additional Component Tutorials"}}},"domain":"http://localhost:3000"}
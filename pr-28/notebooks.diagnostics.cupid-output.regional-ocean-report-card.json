{"version":3,"kind":"Notebook","sha256":"611c80333fbaf9886841d7eaa210fc512c5fcc48a2975eac99117bf2c347ce4a","slug":"notebooks.diagnostics.cupid-output.regional-ocean-report-card","location":"/notebooks/diagnostics/cupid_output/Regional_Ocean_Report_Card.ipynb","dependencies":[],"frontmatter":{"title":"Regional Ocean: Basic Region and Surface Field Visualization","content_includes_title":true,"kernelspec":{"name":"cupid-analysis","display_name":"cupid-analysis","language":"python"},"github":"https://github.com/CROCODILE-CESM/CrocoGallery","numbering":{"title":{"offset":3}},"source_url":"https://github.com/CROCODILE-CESM/CrocoGallery/blob/HEAD/gallery/notebooks/diagnostics/cupid_output/Regional_Ocean_Report_Card.ipynb","edit_url":"https://github.com/CROCODILE-CESM/CrocoGallery/edit/HEAD/gallery/notebooks/diagnostics/cupid_output/Regional_Ocean_Report_Card.ipynb","exports":[{"format":"ipynb","filename":"Regional_Ocean_Report_Card.ipynb","url":"/build/Regional_Ocean_Repor-0408b32b12d7d2a447b614bc4e29385f.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.005054,"end_time":"2025-10-13T16:30:56.042060","exception":false,"start_time":"2025-10-13T16:30:56.037006","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Regional Ocean: Basic Region and Surface Field Visualization","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eZOHqmSKcj"}],"identifier":"regional-ocean-basic-region-and-surface-field-visualization","label":"Regional Ocean: Basic Region and Surface Field Visualization","html_id":"regional-ocean-basic-region-and-surface-field-visualization","implicit":true,"key":"JNHyHrefHZ"}],"visibility":"show","key":"FSkycxJzrQ"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.003861,"end_time":"2025-10-13T16:30:56.050085","exception":false,"start_time":"2025-10-13T16:30:56.046224","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note: This notebook is meant to be run with the cupid-analysis kernel (see ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q72mvL2NRT"},{"type":"link","url":"https://ncar.github.io/CUPiD/index.html#installing","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"CUPiD Installation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Btc5wAGct8"}],"urlSource":"https://ncar.github.io/CUPiD/index.html#installing","key":"vENp7IlcbY"},{"type":"text","value":"). This notebook is often run by default as part of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HlpkmaENCU"},{"type":"link","url":"https://ncar.github.io/CUPiD/run_cesm.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"CESM post-processing steps","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gQvSKRyNW1"}],"urlSource":"https://ncar.github.io/CUPiD/run_cesm.html","key":"GVLRlxkhCL"},{"type":"text","value":", but you can also run it manually.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DbcKCHFn3M"}],"key":"PxzoY9ASpH"}],"visibility":"show","key":"d2EclQklqE"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.003798,"end_time":"2025-10-13T16:30:56.057764","exception":false,"start_time":"2025-10-13T16:30:56.053966","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Diagnostics and Plotting Resources","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lzBdym3lQP"}],"identifier":"diagnostics-and-plotting-resources","label":"Diagnostics and Plotting Resources","html_id":"diagnostics-and-plotting-resources","implicit":true,"key":"ziaQpu6RK8"},{"type":"heading","depth":3,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Highly Recommended:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Jc6SHtDc8d"}],"identifier":"highly-recommended","label":"Highly Recommended:","html_id":"highly-recommended","implicit":true,"key":"sUsAGESePD"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://earth-env-data-science.github.io/intro.html","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Xarray Fundamentals - Earth Environmental Data Science Course (recommend the entire course!)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"NvLvTnUZY6"}],"urlSource":"https://earth-env-data-science.github.io/intro.html","key":"N5ziDEclln"}],"key":"ULOJlPrOAD"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://mom6-analysiscookbook.readthedocs.io/en/latest/index.html","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"MOM6 Analysis Cookbook","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yMjunH9Fgf"}],"urlSource":"https://mom6-analysiscookbook.readthedocs.io/en/latest/index.html","key":"ElspgsSHsX"}],"key":"VWvf2M8SdX"},{"type":"heading","depth":3,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Great! Focused on Global Output Diagnostics","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"MzhOUcJU6B"}],"identifier":"great-focused-on-global-output-diagnostics","label":"Great! Focused on Global Output Diagnostics","html_id":"great-focused-on-global-output-diagnostics","implicit":true,"key":"dhF2QJPqoX"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"link","url":"https://mom6-tools.readthedocs.io/examples.html","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"MOM6 Tools (parimarily for global metrics)","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Muwcp9Hzis"}],"urlSource":"https://mom6-tools.readthedocs.io/examples.html","key":"jR1XPH5Snm"}],"key":"CQoP6o0VZm"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"https://ncar.github.io/CESM-Tutorial/notebooks/diagnostics/mom/basics_mom.html","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"MOM6 Diagnostics - CESM Tutorial","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Iu6a7qXgpa"}],"urlSource":"https://ncar.github.io/CESM-Tutorial/notebooks/diagnostics/mom/basics_mom.html","key":"g0nUr8eSgZ"}],"key":"DzmpJeyiOr"},{"type":"heading","depth":3,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Misc.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"f3hEwdaUqw"}],"identifier":"misc","label":"Misc.","html_id":"misc","implicit":true,"key":"uqNj1JPgaC"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"link","url":"https://regional-mom6.readthedocs.io/en/latest/mom6-file-structure-primer.html","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"MOM6 File Structure","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"Wz4gzlmcAJ"}],"urlSource":"https://regional-mom6.readthedocs.io/en/latest/mom6-file-structure-primer.html","key":"jTUYQCeR90"}],"key":"cqi5IZJU6A"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"link","url":"https://xgcm.readthedocs.io/en/latest/xgcm-examples/03_MOM6.html","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"xGCM - python package for staggered grids","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"HEgee1jZ7u"}],"urlSource":"https://xgcm.readthedocs.io/en/latest/xgcm-examples/03_MOM6.html","key":"qmxwvUVL94"}],"key":"ehq1okG1h9"}],"visibility":"show","key":"XfveONSXCf"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:30:56.066223Z","iopub.status.busy":"2025-10-13T16:30:56.065963Z","iopub.status.idle":"2025-10-13T16:31:06.075099Z","shell.execute_reply":"2025-10-13T16:31:06.074475Z"},"papermill":{"duration":10.014815,"end_time":"2025-10-13T16:31:06.076394","exception":false,"start_time":"2025-10-13T16:30:56.061579","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"%load_ext autoreload\n%autoreload 2\nimport os\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport regional_utils as utils\nimport xarray as xr\nfrom cartopy import crs as ccrs","visibility":"hide","key":"se5tnEV33c"},{"type":"outputs","id":"1qlGbPbP3nDxBTvQUwxAV","children":[],"visibility":"show","key":"IcnXKnfMUO"}],"visibility":"show","key":"fENfhkWXxH"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:06.102353Z","iopub.status.busy":"2025-10-13T16:31:06.101995Z","iopub.status.idle":"2025-10-13T16:31:06.510160Z","shell.execute_reply":"2025-10-13T16:31:06.509495Z"},"papermill":{"duration":0.414883,"end_time":"2025-10-13T16:31:06.511629","exception":false,"start_time":"2025-10-13T16:31:06.096746","status":"completed"},"tags":["parameters"]},"children":[{"type":"code","lang":"python","executable":true,"value":"case_name = \"\"  # \"/glade/campaign/cgd/oce/projects/CROCODILE/workshops/2025/Diagnostics/CESM_Output/\"\nCESM_output_dir = \"\"  # \"CROCODILE_tutorial_nwa12_MARBL\"\n\n# As regional domains vary so much in purpose, simulation length, and extent, we don't want to assume a minimum duration\n## Thus, we ignore start and end dates and simply reduce/output over the whole time frame for all of the examples given.\nstart_date = None  # \"0001-01-01\"\nend_date = None  # \"0101-01-01\n\nsave_figs = False\nfig_output_dir = None\n\nlc_kwargs = {}\nserial = False\n\nsfc_variables = []  # ['SSH', 'tos', 'sos', 'speed', 'SSV', 'SSU']\nmonthly_variables = []  # ['thetao', 'so', 'uo', 'vo']","visibility":"hide","key":"aUB8tujU5u"},{"type":"outputs","id":"vdZ-jkGRZ5evNBKQl2ext","children":[],"visibility":"show","key":"gsxHhsCFuF"}],"visibility":"show","key":"YkTA0wK2MC"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:06.521406Z","iopub.status.busy":"2025-10-13T16:31:06.521177Z","iopub.status.idle":"2025-10-13T16:31:06.571336Z","shell.execute_reply":"2025-10-13T16:31:06.570970Z"},"papermill":{"duration":0.055474,"end_time":"2025-10-13T16:31:06.572010","exception":false,"start_time":"2025-10-13T16:31:06.516536","status":"completed"},"tags":["injected-parameters"]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Parameters\ncase_name = \"CROCODILE_tutorial_nwa12_MARBL\"\nCESM_output_dir = (\n    \"/glade/campaign/cgd/oce/projects/CROCODILE/workshops/2025/Diagnostics/CESM_Output/\"\n)\nstart_date = \"\"\nend_date = \"\"\nsave_figs = True\nfig_output_dir = None\nlc_kwargs = {\"threads_per_worker\": 1}\nserial = True\nsfc_variables = [\"tos\"]\nmonthly_variables = [\"thetao\"]\nsubset_kwargs = {}\nproduct = \"/glade/work/ajanney/crocodile_2025/CUPiD/examples/regional_ocean/computed_notebooks//ocn/Regional_Ocean_Report_Card.ipynb\"\n","visibility":"show","key":"XRcdSZt0ap"},{"type":"outputs","id":"xl0AKJ_VZvx6wNVM1AXrx","children":[],"visibility":"show","key":"OcRNbYRR3a"}],"visibility":"show","key":"hRcxjjA7VH"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:06.580713Z","iopub.status.busy":"2025-10-13T16:31:06.580562Z","iopub.status.idle":"2025-10-13T16:31:06.631369Z","shell.execute_reply":"2025-10-13T16:31:06.631037Z"},"papermill":{"duration":0.055789,"end_time":"2025-10-13T16:31:06.631913","exception":false,"start_time":"2025-10-13T16:31:06.576124","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"OUTDIR = os.path.join(CESM_output_dir, case_name, \"ocn\", \"hist\")\nprint(\"Output directory is:\", OUTDIR)","visibility":"hide","key":"DMK3sTFxOF"},{"type":"outputs","id":"k_o_q6S4M77LTehIfpL9G","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Output directory is: /glade/campaign/cgd/oce/projects/CROCODILE/workshops/2025/Diagnostics/CESM_Output/CROCODILE_tutorial_nwa12_MARBL/ocn/hist\n"},"children":[],"key":"SSyaLdEEyd"}],"visibility":"show","key":"jwCLb5Zv7n"}],"visibility":"show","key":"x0mtShZo4d"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.004039,"end_time":"2025-10-13T16:31:06.640189","exception":false,"start_time":"2025-10-13T16:31:06.636150","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Load in Model Output and Look at Variables/Meta Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Y5LNZdoypS"}],"identifier":"load-in-model-output-and-look-at-variables-meta-data","label":"Load in Model Output and Look at Variables/Meta Data","html_id":"load-in-model-output-and-look-at-variables-meta-data","implicit":true,"key":"ReIU8IV6Gu"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Default File Structure in MOM6","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZfPliDfldA"}],"identifier":"default-file-structure-in-mom6","label":"Default File Structure in MOM6","html_id":"default-file-structure-in-mom6","implicit":true,"key":"OAPdLTagGB"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"This file structure will be different if you modify the diag_table.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"WEzAMone4o"}],"key":"ikiMnLwdka"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"static data","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"AjCkcmM2Cr"}],"key":"EemY64c7FR"},{"type":"text","value":": contains horizontal grid, vertical grid, land/sea mask, bathymetry, lat/lon information","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"DeZQpXbCpm"}],"key":"RcHLX3ZiXx"}],"key":"FcrfoqCKm4"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"sfc data","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"putkKfyRiS"}],"key":"PnSn7LGTKt"},{"type":"text","value":": daily output of 2D surface fields (salinity, temp, SSH, velocities)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"CUehJmVrhU"}],"key":"dIepoHgWiv"}],"key":"n0WkIGJA9I"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"monthly data","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"lqbiol1m5T"}],"key":"PwwFEd9vGI"},{"type":"text","value":": averaged monthly output of the full 3D domain, regridded to a predefined grid (MOM6 default is WOA, see more below)","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"rPv4pB7pKp"}],"key":"JcqD5kXgpJ"}],"key":"SFusIXlo3N"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"native data","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"c4GkBz9ocd"}],"key":"iYz5b9Ba8q"},{"type":"text","value":": averaged monthly output of ocean state and atmospheric fluxes on the native MOM6 grid","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"zPtdsdDnoH"}],"key":"sv0QFqtBK2"}],"key":"uhhopV3ChT"}],"key":"XzT3tfILeO"}],"visibility":"show","key":"v2P0IJj6Up"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:06.648840Z","iopub.status.busy":"2025-10-13T16:31:06.648698Z","iopub.status.idle":"2025-10-13T16:31:36.638345Z","shell.execute_reply":"2025-10-13T16:31:36.637801Z"},"papermill":{"duration":29.994821,"end_time":"2025-10-13T16:31:36.639049","exception":false,"start_time":"2025-10-13T16:31:06.644228","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Xarray time decoding things\ntime_coder = xr.coders.CFDatetimeCoder(use_cftime=True)\n\n## Static data includes hgrid, vgrid, bathymetry, land/sea mask\nstatic_data = xr.open_mfdataset(\n    os.path.join(OUTDIR, \"*h.static.nc\"),\n    decode_timedelta=True,\n    decode_times=time_coder,\n    engine=\"netcdf4\",\n)\n\n## Surface Data\nsfc_data = xr.open_mfdataset(\n    os.path.join(OUTDIR, \"*h.sfc*.nc\"),\n    decode_timedelta=True,\n    decode_times=time_coder,\n    engine=\"netcdf4\",\n)\n\n## Monthly Full Domain Data\n## Not used in this notebook by default\nmonthly_data = xr.open_mfdataset(\n    os.path.join(OUTDIR, \"*h.z*.nc\"),\n    decode_timedelta=True,\n    decode_times=time_coder,\n    engine=\"netcdf4\",\n)\n\n## Monthly Full Domain Data, on native MOM6 grid\n## Not used in this notebook by default\nnative_data = xr.open_mfdataset(\n    os.path.join(OUTDIR, \"*h.native*.nc\"),\n    decode_timedelta=True,\n    decode_times=time_coder,\n    engine=\"netcdf4\",\n)\n\n## Image/Gif Output Directory\nif fig_output_dir is None:\n    image_output_dir = os.path.join(\n        \"/glade/derecho/scratch/\",\n        os.environ[\"USER\"],\n        \"archive\",\n        case_name,\n        \"ocn\",\n        \"cupid_images\",\n    )\nelse:\n    image_output_dir = os.path.join(fig_output_dir, case_name, \"ocn\", \"cupid_images\")\nif not os.path.exists(image_output_dir):\n    os.makedirs(image_output_dir)\nprint(\"Image output directory is:\", image_output_dir)","visibility":"hide","key":"kNYQKZdsGo"},{"type":"outputs","id":"q7uqb9ElheSz-mUQljKUm","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Image output directory is: /glade/derecho/scratch/ajanney/archive/CROCODILE_tutorial_nwa12_MARBL/ocn/cupid_images\n"},"children":[],"key":"bRMkt9CCXA"}],"visibility":"show","key":"ksqkaPIHbX"}],"visibility":"show","key":"byk7Yl1RaK"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:36.650159Z","iopub.status.busy":"2025-10-13T16:31:36.649826Z","iopub.status.idle":"2025-10-13T16:31:36.818566Z","shell.execute_reply":"2025-10-13T16:31:36.818106Z"},"papermill":{"duration":0.174199,"end_time":"2025-10-13T16:31:36.819110","exception":false,"start_time":"2025-10-13T16:31:36.644911","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"## Select for only the variables we want to analyze\nif len(sfc_variables) > 0:\n    print(\"Selecting only the following surface variables:\", sfc_variables)\n    sfc_data = sfc_data[sfc_variables]\nif len(monthly_variables) > 0:\n    print(\"Selecting only the following monthly variables:\", monthly_variables)\n    monthly_data = monthly_data[monthly_variables]\n\n## Apply time boundaries\n## if they are the right format\nif len(start_date.split(\"-\")) == 3 and len(end_date.split(\"-\")) == 3:\n    import cftime\n\n    calendar = sfc_data.time.encoding.get(\"calendar\", \"standard\")\n\n    calendar_map = {\n        \"gregorian\": cftime.DatetimeProlepticGregorian,\n        \"noleap\": cftime.DatetimeNoLeap,\n    }\n\n    CFTime = calendar_map.get(calendar, cftime.DatetimeGregorian)\n    y, m, d = [int(i) for i in start_date.split(\"-\")]\n    start_date_time = CFTime(y, m, d)\n    y, m, d = [int(i) for i in end_date.split(\"-\")]\n    end_date_time = CFTime(y, m, d)\n\n    print(\n        f\"Applying time range from start_date: {start_date_time} and end_date: {end_date_time}.\"\n    )\n\n    sfc_data = sfc_data.sel(time=slice(start_date_time, end_date_time))\n    monthly_data = monthly_data.sel(time=slice(start_date_time, end_date_time))\n    native_data = native_data.sel(time=slice(start_date_time, end_date_time))\n\nsfc_time_bounds = [\n    sfc_data[\"time\"].isel(time=0).compute().item(),\n    sfc_data[\"time\"].isel(time=-1).compute().item(),\n]\nmonthly_time_bounds = [\n    monthly_data[\"time\"].isel(time=0).compute().item(),\n    monthly_data[\"time\"].isel(time=-1).compute().item(),\n]\n\nprint(f\"Surface Data Time Bounds: {sfc_time_bounds[0]} to {sfc_time_bounds[-1]}\")\nprint(\n    f\"Monthly Data Time Bounds: {monthly_time_bounds[0]} to {monthly_time_bounds[-1]}\"\n)","visibility":"hide","key":"mQvY8DEF16"},{"type":"outputs","id":"JswLgN0eDPKfosHZXFQUi","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Selecting only the following surface variables: ['tos']\nSelecting only the following monthly variables: ['thetao']\nSurface Data Time Bounds: 1999-12-30 12:00:00 to 2000-11-28 12:00:00\nMonthly Data Time Bounds: 2000-01-14 12:00:00 to 2000-10-14 12:00:00\n"},"children":[],"key":"mUaZYjNCwC"}],"visibility":"show","key":"BGXL8GyAmr"}],"visibility":"show","key":"DepwEzwkNP"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.004185,"end_time":"2025-10-13T16:31:36.827644","exception":false,"start_time":"2025-10-13T16:31:36.823459","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"*mom6.h.static*.nc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TiFiUbV9ZM"}],"key":"OevzO79Oiv"},{"type":"text","value":": static information about the domain","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sgnYLD6KzB"}],"identifier":"id-mom6-h-static-nc-static-information-about-the-domain","label":"*mom6.h.static*.nc: static information about the domain","html_id":"id-mom6-h-static-nc-static-information-about-the-domain","implicit":true,"key":"sFarmXwDiu"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The MOM6 grid uses an Arakawa C grid which staggers velocities and tracers (temp, salinity, SSH, etc.). See ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"lNAgwpNd2A"},{"type":"link","url":"https://mom6.readthedocs.io/en/main/api/generated/pages/Discrete_Grids.html#horizontal-grids","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"this MOM6 documentation","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"rzKid8ZvTZ"}],"urlSource":"https://mom6.readthedocs.io/en/main/api/generated/pages/Discrete_Grids.html#horizontal-grids","key":"IIbJXK5TfV"},{"type":"text","value":" for more information.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"H29WyGhYH3"}],"key":"u1KPgY8wqE"},{"type":"heading","depth":4,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Some variables of interest:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"tps9wtfDAs"}],"identifier":"some-variables-of-interest","label":"Some variables of interest:","html_id":"some-variables-of-interest","implicit":true,"key":"pL7biKV4xH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"geolon","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gSHaaZ4QYl"},{"type":"text","value":"/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"l73jMbVN3O"},{"type":"inlineCode","value":"geolat","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ZrCQqNNijm"}],"key":"VvhjSjN3S1"},{"type":"text","value":" (and c/u/v variants): specifies the true lat/lon of each cell. We use these variables for plotting and placing the data geographically.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jBNPzLlg5R"}],"key":"AZJRtRBH4N"}],"key":"mlwIPRPh7U"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"inlineCode","value":"wet","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"XXxQArVf23"}],"key":"rFwOUFcthY"},{"type":"text","value":" (and c/u/v variants): the land-sea mask that specifies if a given point is on land or sea.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"VchJkfEDlp"}],"key":"FpTKWbodNa"}],"key":"Z7e3nEIq8q"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"areacello","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"co6WSjwi3E"}],"key":"g4EcpPxqab"},{"type":"text","value":" (and bu,cu,cv variants): area of grid cell (important for taking area-weighted averages)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"oDVJ5kGM7d"}],"key":"EQYJp8BCdk"}],"key":"ic6FNs1aqT"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"inlineCode","value":"deptho","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"c33uPS0K18"}],"key":"K34Brz4z66"},{"type":"text","value":": depth of ocean floor - bathymetry","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"xgQ9YXL6tw"}],"key":"x3sKVTtrZO"}],"key":"cHajAwLf6p"}],"key":"IoyhWqUM1L"}],"visibility":"show","key":"AeHnsVS7hk"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:36.842672Z","iopub.status.busy":"2025-10-13T16:31:36.842517Z","iopub.status.idle":"2025-10-13T16:31:37.026570Z","shell.execute_reply":"2025-10-13T16:31:37.026085Z"},"papermill":{"duration":0.189881,"end_time":"2025-10-13T16:31:37.027620","exception":false,"start_time":"2025-10-13T16:31:36.837739","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"static_data","visibility":"hide","key":"MSA8BoRyA9"},{"type":"outputs","id":"D-dDaJq2Ek0Cdth1FAoRZ","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":7,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"284b20c7a73fe4ac079091efd12de1f6","path":"/build/284b20c7a73fe4ac079091efd12de1f6.html"},"text/plain":{"content":"<xarray.Dataset> Size: 46MB\nDimensions:       (xh: 740, yh: 780, time: 1, xq: 741, yq: 781)\nCoordinates:\n  * xh            (xh) float64 6kB -97.96 -97.88 -97.79 ... -36.54 -36.46 -36.38\n  * yh            (yh) float64 6kB 5.243 5.326 5.409 5.492 ... 53.82 53.86 53.89\n  * time          (time) object 8B 0001-01-01 00:00:00\n  * xq            (xq) float64 6kB -98.0 -97.92 -97.83 ... -36.5 -36.42 -36.33\n  * yq            (yq) float64 6kB 5.201 5.284 5.367 5.45 ... 53.84 53.87 53.91\nData variables: (12/20)\n    geolon        (yh, xh) float32 2MB dask.array<chunksize=(780, 740), meta=np.ndarray>\n    geolat        (yh, xh) float32 2MB dask.array<chunksize=(780, 740), meta=np.ndarray>\n    geolon_c      (yq, xq) float32 2MB dask.array<chunksize=(781, 741), meta=np.ndarray>\n    geolat_c      (yq, xq) float32 2MB dask.array<chunksize=(781, 741), meta=np.ndarray>\n    geolon_u      (yh, xq) float32 2MB dask.array<chunksize=(780, 741), meta=np.ndarray>\n    geolat_u      (yh, xq) float32 2MB dask.array<chunksize=(780, 741), meta=np.ndarray>\n    ...            ...\n    areacello     (yh, xh) float32 2MB dask.array<chunksize=(780, 740), meta=np.ndarray>\n    areacello_cu  (yh, xq) float32 2MB dask.array<chunksize=(780, 741), meta=np.ndarray>\n    areacello_cv  (yq, xh) float32 2MB dask.array<chunksize=(781, 740), meta=np.ndarray>\n    areacello_bu  (yq, xq) float32 2MB dask.array<chunksize=(781, 741), meta=np.ndarray>\n    sin_rot       (yh, xh) float32 2MB dask.array<chunksize=(780, 740), meta=np.ndarray>\n    cos_rot       (yh, xh) float32 2MB dask.array<chunksize=(780, 740), meta=np.ndarray>\nAttributes:\n    NumFilesInSet:  1\n    title:          MOM6 diagnostic fields table for CESM case: marbl.bio.croc.5\n    grid_type:      regular\n    grid_tile:      N/A","content_type":"text/plain"}}},"children":[],"key":"xXoK2Hd3h9"}],"visibility":"show","key":"S6cPUcMh6H"}],"visibility":"show","key":"TV3eZt3HZt"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.005413,"end_time":"2025-10-13T16:31:37.039497","exception":false,"start_time":"2025-10-13T16:31:37.034084","status":"completed"},"tags":[]},"children":[{"type":"div","class":"alert alert-info","children":[{"type":"strong","children":[{"type":"text","value":"Indexing and the Horizontal C-grid in MOM6","key":"fXp6UjvPU7"}],"key":"mddeqNjqio"},{"type":"paragraph","children":[{"type":"text","value":"When accessing the output, we need to pay particular attention to which variables we are accessing and which coordinates correspond to their position on the grid. This also affects plotting and spatial averages (as we will see in this notebook and others).","key":"QGchb6YEcn"}],"key":"HPQWd9y23A"},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"xh","key":"S5wPjofsQO"},{"type":"text","value":"/","key":"ixM1X25QbV"},{"type":"inlineCode","value":"yh","key":"hfH5rn9K3d"},{"type":"text","value":": index the center of the cell in ","key":"NmNxHHNHqV"},{"type":"inlineCode","value":"x","key":"TP4K1PfiXy"},{"type":"text","value":" and ","key":"gtnbNkBUPa"},{"type":"inlineCode","value":"y","key":"dmaS9ocbae"},{"type":"text","value":" respectively","key":"BThZ763Xfn"}],"key":"HSiqg521d6"}],"key":"zjwmhnrpYG"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"xq","key":"afYg3ue4Nc"},{"type":"text","value":"/","key":"AjPCNBgxKW"},{"type":"inlineCode","value":"yq","key":"YYGYrpUZo2"},{"type":"text","value":": index the corner of the cell in ","key":"ApBKMq3hDX"},{"type":"inlineCode","value":"x","key":"gQNM5sLqEB"},{"type":"text","value":" and ","key":"as9aFVODSf"},{"type":"inlineCode","value":"y","key":"UqmDD2sdYq"},{"type":"text","value":" respectively","key":"PgV66GLkVh"}],"key":"GARLeUj6XX"}],"key":"wjH7TFU7x9"}],"key":"T63wkXuDhl"},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Coordinates:","key":"htwQVykQb4"}],"key":"WxmpxUaUbs"}],"key":"n5S5PiV3M7"},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"(","key":"bvdomInSEr"},{"type":"inlineCode","value":"xh","key":"tkQqocjDnh"},{"type":"text","value":",","key":"je6zplGM39"},{"type":"inlineCode","value":"yh","key":"Oxv61xG8wO"},{"type":"text","value":"): center of cell, where tracers are. Plot with ","key":"STCkn3tlre"},{"type":"inlineCode","value":"geolon","key":"Xeh4UJ3tEE"},{"type":"text","value":",","key":"wchV6NAgpY"},{"type":"inlineCode","value":"geolat","key":"j7lE9Kkkzm"},{"type":"text","value":".","key":"X44s1PHzcq"}],"key":"bnZBDmLZq7"}],"key":"XR97HM52MB"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"(","key":"nGcLEM7A6P"},{"type":"inlineCode","value":"xh","key":"tOrk1W5Xzw"},{"type":"text","value":",","key":"eVEsBhPjlT"},{"type":"inlineCode","value":"yq","key":"P7ujThpNd1"},{"type":"text","value":"): middle of horizontal interface, where meridional (v) velocity is. Plot with ","key":"Q4XAUfvLOp"},{"type":"inlineCode","value":"geolon_v","key":"saVg74tedy"},{"type":"text","value":",","key":"rI9YCVZU0X"},{"type":"inlineCode","value":"geolat_v","key":"STMxJUFToY"},{"type":"text","value":".","key":"YOX9QuH7Yu"}],"key":"YiWR61mfYR"}],"key":"bK4GcIJ3b6"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"(","key":"mPPkVgBQ1t"},{"type":"inlineCode","value":"xq","key":"pbhDMNl57F"},{"type":"text","value":",","key":"MinaVRgKoq"},{"type":"inlineCode","value":"yh","key":"PhFmuYmYCI"},{"type":"text","value":"): middle of vertical interface, where zonal (u) velocity is. Plot with ","key":"E3QoH29xXJ"},{"type":"inlineCode","value":"geolon_u","key":"dxcd3w5xmA"},{"type":"text","value":",","key":"s07ZIJasiM"},{"type":"inlineCode","value":"geolat_u","key":"BbTvGPpoiH"},{"type":"text","value":".","key":"yV2AgC7gfE"}],"key":"ckXin5OtXG"}],"key":"Qum1qFMDIl"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"(","key":"ao9CgiGJho"},{"type":"inlineCode","value":"xq","key":"PWHEfFIEoZ"},{"type":"text","value":",","key":"k068NnsqlB"},{"type":"inlineCode","value":"yq","key":"UCmUtpuXJy"},{"type":"text","value":"): corners between cells, where vorticity is.","key":"Yzte1gCYag"}],"key":"XUZSUchEZd"}],"key":"chQwjWA03h"}],"key":"L0WLvH1y18"}],"key":"Ue2J1npDwi"}],"visibility":"show","key":"xuXQ2Vtwog"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.00528,"end_time":"2025-10-13T16:31:37.050093","exception":false,"start_time":"2025-10-13T16:31:37.044813","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"*h.sfc*.nc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tbGxlxqor1"}],"key":"bBvkvwAME7"},{"type":"text","value":": daily surface fields","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"teQFio8FO2"}],"identifier":"id-h-sfc-nc-daily-surface-fields","label":"*h.sfc*.nc: daily surface fields","html_id":"id-h-sfc-nc-daily-surface-fields","implicit":true,"key":"hJgRs82r5k"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The surface fields are especially useful for diagnosing short runs. This is not only the most dynamic field for short runs, but it also is the only file that stores daily results (by default). A lot of the diagnostics in this notebook use surface fields because we are able to take time averages and look at time series for any run longer than a couple of days (unlike the full 3D domain fields which are averaged over each month).","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bASKKPoxGx"}],"key":"tfPLfqa3d0"},{"type":"heading","depth":4,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Some variables of interest:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"uVYEnZYyWi"}],"identifier":"some-variables-of-interest","label":"Some variables of interest:","html_id":"some-variables-of-interest-1","implicit":true,"key":"la17XOWqcC"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"SSH","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"TClycGhuxp"},{"type":"text","value":": sea surface height","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"u4HhtA2heY"}],"key":"SfISInp6JS"}],"key":"IzyNl3gJeD"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"tos","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"r4VnGgAvpz"},{"type":"text","value":": temperature of ocean surface","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"TFMrYZmfVL"}],"key":"wYqn9soVxe"}],"key":"pPRMjwFTeT"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sos","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Be61GRBNDw"},{"type":"text","value":": salinity of ocean surface","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"uep72RHgz2"}],"key":"l3JkIVuL4R"}],"key":"SYUOiGjXc3"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"speed","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"qNZjyp7Dme"},{"type":"text","value":": magnitude of speed (considered a tracer, at the center of a cell)","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"WyKsGZOlaH"}],"key":"XykTJMvzsz"}],"key":"QYGGpmd7EF"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"SSU","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"uCe30hpTdX"},{"type":"text","value":" and ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"lWXVtVYr0k"},{"type":"inlineCode","value":"SSV","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"GdEjdUNqmk"},{"type":"text","value":": zonal and meridional velocity at the surface","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"qYdxR82UO5"}],"key":"mPrUB8PPhR"}],"key":"DeC2q2hbX3"}],"key":"oz7vzlMkho"}],"visibility":"show","key":"C0b8fvM4Zd"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:37.061187Z","iopub.status.busy":"2025-10-13T16:31:37.061014Z","iopub.status.idle":"2025-10-13T16:31:37.138834Z","shell.execute_reply":"2025-10-13T16:31:37.138397Z"},"papermill":{"duration":0.084043,"end_time":"2025-10-13T16:31:37.139410","exception":false,"start_time":"2025-10-13T16:31:37.055367","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"sfc_data","visibility":"hide","key":"U3O0LKKpIY"},{"type":"outputs","id":"6Lp00bfyGOB4zyYoUB8LZ","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"e8b9c65b6c6d32333b330e6d7939123c","path":"/build/e8b9c65b6c6d32333b330e6d7939123c.html"},"text/plain":{"content":"<xarray.Dataset> Size: 773MB\nDimensions:  (time: 335, yh: 780, xh: 740)\nCoordinates:\n  * xh       (xh) float64 6kB -97.96 -97.88 -97.79 ... -36.54 -36.46 -36.38\n  * yh       (yh) float64 6kB 5.243 5.326 5.409 5.492 ... 53.82 53.86 53.89\n  * time     (time) object 3kB 1999-12-30 12:00:00 ... 2000-11-28 12:00:00\nData variables:\n    tos      (time, yh, xh) float32 773MB dask.array<chunksize=(31, 780, 740), meta=np.ndarray>\nAttributes:\n    NumFilesInSet:     1\n    title:             MOM6 diagnostic fields table for CESM case: marbl.bio....\n    associated_files:  areacello: marbl.bio.croc.5.mom6.h.static.nc\n    grid_type:         regular\n    grid_tile:         N/A","content_type":"text/plain"}}},"children":[],"key":"gIDvAGH9s3"}],"visibility":"show","key":"TLg5WKvtuB"}],"visibility":"show","key":"ynlHI46kEA"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.005731,"end_time":"2025-10-13T16:31:37.151016","exception":false,"start_time":"2025-10-13T16:31:37.145285","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"*h.z*.nc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"P9JKrVRWfx"}],"key":"xK86EPu8bH"},{"type":"text","value":": fields for the full 3D domain, averaged monthly, regridded vertically","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZCl8aB3D0S"}],"identifier":"id-h-z-nc-fields-for-the-full-3d-domain-averaged-monthly-regridded-vertically","label":"*h.z*.nc: fields for the full 3D domain, averaged monthly, regridded vertically","html_id":"id-h-z-nc-fields-for-the-full-3d-domain-averaged-monthly-regridded-vertically","implicit":true,"key":"GSJ7nodssR"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"These are vertically remapped diagnostics files that capture the full 3D domain, but they only output monthly averages. For runs less than a month, they will average over the full length of the run.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"os9kox8SCL"}],"key":"XDK9SeZXqf"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"By default, this diagnostics MOM6 regrids output to the vertical grid from the 2009 World Ocean Atlas (35 layers down to 6750 m).","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"edeq7CiNGl"}],"key":"AmxrbFdJAj"},{"type":"heading","depth":4,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Some variables of interest:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"QvGTpuhxdM"}],"identifier":"some-variables-of-interest","label":"Some variables of interest:","html_id":"some-variables-of-interest-2","implicit":true,"key":"DcfNDMwMME"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"uo","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"GQTllOnx7G"},{"type":"text","value":" and ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UkjMH9ClI5"},{"type":"inlineCode","value":"vo","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"F1fs11Er20"},{"type":"text","value":": zonal and meridional velocity","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"V8lJe9QEoc"}],"key":"F93MjFfHzV"}],"key":"udLCgrLSNe"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"thetao","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"QlSfAj99Ur"},{"type":"text","value":": potential temperature","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"UkUSh1vsi2"}],"key":"spA42VNixU"}],"key":"D2FvxAMWeL"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"so","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"gl9AAPZCx6"},{"type":"text","value":": salinity","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"YGBXGj3inb"}],"key":"TH236ErCEc"}],"key":"hja0XNfYWB"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"vmo","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"ghApIGalO2"},{"type":"text","value":" and ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"i8ktARZudy"},{"type":"inlineCode","value":"umo","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"MpzlhuttGV"},{"type":"text","value":": zonal and meridional mass transport","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"DNGrunSCV0"}],"key":"p0rbP7MTYw"}],"key":"Ts01wZErno"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"volcello","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"LMS8x9QWRg"},{"type":"text","value":": volume of each cell (important for averaging over a volume of the domain)","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"MXgLLvvDke"}],"key":"bjzP8j7Y9F"}],"key":"DOhLVUuBOa"}],"key":"LGm2BzVg6q"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Note:","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"jXUGeu2Tom"}],"key":"rNiTgJ7Jx9"},{"type":"text","value":" now there are two ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"uLAZi2btGh"},{"type":"inlineCode","value":"z","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"dvJfOFXgo3"},{"type":"text","value":" coordinates. ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"cCOAmmEJz3"},{"type":"inlineCode","value":"z_i","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"BWbTQlPuJA"},{"type":"text","value":" is the vertical interface between cells and ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"qB2kf1kfkY"},{"type":"inlineCode","value":"z_l","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"K9pFTaTiW0"},{"type":"text","value":" identifies the depth of the cell centers.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"WhtvFgPmPD"}],"key":"d1oefta4yB"}],"visibility":"show","key":"M3ZCcjEDKD"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:37.163186Z","iopub.status.busy":"2025-10-13T16:31:37.163003Z","iopub.status.idle":"2025-10-13T16:31:37.212770Z","shell.execute_reply":"2025-10-13T16:31:37.212366Z"},"papermill":{"duration":0.056582,"end_time":"2025-10-13T16:31:37.213336","exception":false,"start_time":"2025-10-13T16:31:37.156754","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"monthly_data","visibility":"hide","key":"ZewfU1JyXo"},{"type":"outputs","id":"Oxrqw9gGZftigw-zYLC9Z","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":9,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"92a38eb9a3e6fb6b8c1d9da71cce5cbb","path":"/build/92a38eb9a3e6fb6b8c1d9da71cce5cbb.html"},"text/plain":{"content":"<xarray.Dataset> Size: 808MB\nDimensions:  (time: 10, z_l: 35, yh: 780, xh: 740)\nCoordinates:\n  * yh       (yh) float64 6kB 5.243 5.326 5.409 5.492 ... 53.82 53.86 53.89\n  * z_l      (z_l) float64 280B 2.5 10.0 20.0 32.5 ... 5.5e+03 6e+03 6.5e+03\n  * time     (time) object 80B 2000-01-14 12:00:00 ... 2000-10-14 12:00:00\n  * xh       (xh) float64 6kB -97.96 -97.88 -97.79 ... -36.54 -36.46 -36.38\nData variables:\n    thetao   (time, z_l, yh, xh) float32 808MB dask.array<chunksize=(1, 35, 780, 740), meta=np.ndarray>\nAttributes:\n    NumFilesInSet:     1\n    title:             MOM6 diagnostic fields table for CESM case: marbl.bio....\n    associated_files:  areacello: marbl.bio.croc.5.mom6.h.static.nc\n    grid_type:         regular\n    grid_tile:         N/A","content_type":"text/plain"}}},"children":[],"key":"OZ8hohrAbI"}],"visibility":"show","key":"ftYswl7SDd"}],"visibility":"show","key":"flCWCdq9tN"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.006168,"end_time":"2025-10-13T16:31:37.225696","exception":false,"start_time":"2025-10-13T16:31:37.219528","status":"completed"},"tags":[]},"children":[{"type":"div","class":"alert alert-info","children":[{"type":"strong","children":[{"type":"text","value":"Note on Vertically Remapped Diagnostics in MOM6","key":"BO48lXJVe8"}],"key":"e5XDeC1FBe"},{"type":"paragraph","children":[{"type":"text","value":"The output found in ","key":"XNLUonSU70"},{"type":"inlineCode","value":"*mom6.h.z.*.nc","key":"UKQw5uTaeg"},{"type":"text","value":" files is vertically remapped by MOM6. By default, this output is on the 2009 World Ocean Atlas grid. You can regrid the output after runtime (see packages like ","key":"iBYjDISniJ"},{"type":"link","url":"https://xgcm.readthedocs.io/en/latest/index.html","children":[{"type":"text","value":"xgcm","key":"jadNyEWVOe"}],"urlSource":"https://xgcm.readthedocs.io/en/latest/index.html","key":"n02jFaGfnX"},{"type":"text","value":" and and ","key":"IKfApUVsVP"},{"type":"link","url":"https://xesmf.readthedocs.io/en/stable/","children":[{"type":"text","value":"xESMF","key":"vsweawZ6Gb"}],"urlSource":"https://xesmf.readthedocs.io/en/stable/","key":"pE5hi37GGa"},{"type":"text","value":"), but if you know a vertical grid that you need output on, MOM6 can handle the interpolation automatically.","key":"RebZFjZQka"}],"key":"wSxFxlBn55"},{"type":"paragraph","children":[{"type":"text","value":"The vertical grid settings for a particular CESM run can be found in ","key":"sgjZSsrOPc"},{"type":"inlineCode","value":"MOM_parameter_doc.all","key":"CoenNj2Z3Q"},{"type":"text","value":" in the CESM case run directory. See ","key":"NpbgwjOmS4"},{"type":"link","url":"https://mom6.readthedocs.io/en/main/api/generated/pages/Diagnostics.html#vertically-remapped-diagnostics","children":[{"type":"text","value":"this MOM6 documentation","key":"jIh6f4txud"}],"urlSource":"https://mom6.readthedocs.io/en/main/api/generated/pages/Diagnostics.html#vertically-remapped-diagnostics","key":"jaqXTEmsWc"},{"type":"text","value":" for more information.","key":"jDl8g3Ps1A"}],"key":"RiV3ezhhPa"}],"key":"JXX0Das6za"}],"visibility":"show","key":"FQBsFCqsgw"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.00607,"end_time":"2025-10-13T16:31:37.237937","exception":false,"start_time":"2025-10-13T16:31:37.231867","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"*h.native*.nc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vlL5hujHAp"}],"key":"wgtG3aIkxM"},{"type":"text","value":": fields for the full 3D domain, averaged monthly, on native MOM6 grid.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uO0EgTPHHb"}],"identifier":"id-h-native-nc-fields-for-the-full-3d-domain-averaged-monthly-on-native-mom6-grid","label":"*h.native*.nc: fields for the full 3D domain, averaged monthly, on native MOM6 grid.","html_id":"id-h-native-nc-fields-for-the-full-3d-domain-averaged-monthly-on-native-mom6-grid","implicit":true,"key":"zLZBDIrL6y"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"These outputs are on the MOM6 native grid. From the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"EBsJoQXYLg"},{"type":"link","url":"https://mom6.readthedocs.io/en/main/api/generated/pages/Diagnostics.html#native-diagnostics","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"MOM6 Documentation","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"P4OGgzVLTP"}],"urlSource":"https://mom6.readthedocs.io/en/main/api/generated/pages/Diagnostics.html#native-diagnostics","key":"JgDBuZBmfE"},{"type":"text","value":":","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"yKd85WrFwo"}],"key":"Cq8cBee8HZ"},{"type":"blockquote","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Since the model can be run in arbitrary coordinates, say in hybrid-coordinate mode, then native-space diagnostics can be potentially confusing. Native diagnostics are useful when examining exactly what the model is doing","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oJMXkr7b2i"}],"key":"ySd8IVOSSk"}],"key":"SHbgsc0LLm"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The default native file (as configured by CESM) also outputs useful global averages and atmospheric variables.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OvSuQ7UEM2"}],"key":"sb0EcNwYzk"},{"type":"heading","depth":4,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Some variables of interest:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"sfcZ0TGu3u"}],"identifier":"some-variables-of-interest","label":"Some variables of interest:","html_id":"some-variables-of-interest-3","implicit":true,"key":"PPoU4t0lOr"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"soga","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"EpA7kDe4HH"},{"type":"text","value":": global mean ocean salinity","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"rC54xtcAFl"}],"key":"Wp7JNe6WeJ"}],"key":"JqOuGrAmdE"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"thetaoga","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"qOmSqBXCkp"},{"type":"text","value":": global mean ocean potential temperature","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ZS8z7HrCQZ"}],"key":"sOqlNZhhRX"}],"key":"jt74mHuOOd"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"tauuo","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"aaT3hyrmT4"},{"type":"text","value":" and ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"alcwxQBhp7"},{"type":"inlineCode","value":"tauvo","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"I8mnuGvsp5"},{"type":"text","value":": zonal and meridional downward stress from the atmospheric forcing","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"aYhJmVG8a3"}],"key":"pnR8m9XFLI"}],"key":"lVx4mK0Dml"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"hfds","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"mojyeZtPnW"},{"type":"text","value":": net downward surface heat flux","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"TG78tyyugX"}],"key":"TKM9604bi6"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"hf*","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"QcyUMXE60q"},{"type":"text","value":": various individual heat fluxes into the ocean","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"nXoE6L1GuO"}],"key":"u6Sg8eAG3J"}],"key":"QL5lgHuHsX"}],"key":"THAU8iVQ6O"}],"key":"nyrKnvbr7A"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"friver","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"da6A6ZTzNu"},{"type":"text","value":": freshwater flux from rivers","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"va080ML85r"}],"key":"dQ5sariNVQ"}],"key":"CkbfWBy9fP"}],"key":"Y2kjYb5BAk"}],"visibility":"show","key":"hG61kbEVMR"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:37.251011Z","iopub.status.busy":"2025-10-13T16:31:37.250784Z","iopub.status.idle":"2025-10-13T16:31:37.325633Z","shell.execute_reply":"2025-10-13T16:31:37.325155Z"},"papermill":{"duration":0.085767,"end_time":"2025-10-13T16:31:37.329811","exception":false,"start_time":"2025-10-13T16:31:37.244044","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"native_data","visibility":"show","key":"xHPyE9DPIO"},{"type":"outputs","id":"JB4w_GBziCc_WYjOQt8RG","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":10,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"6064b7a519c9298036f4255f49349659","path":"/build/6064b7a519c9298036f4255f49349659.html"},"text/plain":{"content":"<xarray.Dataset> Size: 39GB\nDimensions:               (time: 11, scalar_axis: 1, zl: 75, yh: 780, xq: 741,\n                           yq: 781, xh: 740, zi: 76, nbnd: 2)\nCoordinates:\n  * scalar_axis           (scalar_axis) float64 8B 0.0\n  * time                  (time) object 88B 2000-01-14 12:00:00 ... 2000-11-1...\n  * nbnd                  (nbnd) float64 16B 1.0 2.0\n  * xq                    (xq) float64 6kB -98.0 -97.92 -97.83 ... -36.42 -36.33\n  * yh                    (yh) float64 6kB 5.243 5.326 5.409 ... 53.86 53.89\n  * zl                    (zl) float64 600B 1.0 3.0 5.0 ... 6.125e+03 6.375e+03\n  * xh                    (xh) float64 6kB -97.96 -97.88 ... -36.46 -36.38\n  * yq                    (yq) float64 6kB 5.201 5.284 5.367 ... 53.87 53.91\n  * zi                    (zi) float64 608B 0.0 2.0 4.0 ... 6.25e+03 6.5e+03\nData variables: (12/76)\n    soga                  (time, scalar_axis) float32 44B dask.array<chunksize=(1, 1), meta=np.ndarray>\n    thetaoga              (time, scalar_axis) float32 44B dask.array<chunksize=(1, 1), meta=np.ndarray>\n    uh                    (time, zl, yh, xq) float32 2GB dask.array<chunksize=(1, 75, 780, 741), meta=np.ndarray>\n    vh                    (time, zl, yq, xh) float32 2GB dask.array<chunksize=(1, 75, 781, 740), meta=np.ndarray>\n    vhbt                  (time, yq, xh) float32 25MB dask.array<chunksize=(1, 781, 740), meta=np.ndarray>\n    uhbt                  (time, yh, xq) float32 25MB dask.array<chunksize=(1, 780, 741), meta=np.ndarray>\n    ...                    ...\n    speed                 (time, yh, xh) float32 25MB dask.array<chunksize=(1, 780, 740), meta=np.ndarray>\n    mlotst                (time, yh, xh) float32 25MB dask.array<chunksize=(1, 780, 740), meta=np.ndarray>\n    average_T1            (time) object 88B dask.array<chunksize=(1,), meta=np.ndarray>\n    average_T2            (time) object 88B dask.array<chunksize=(1,), meta=np.ndarray>\n    average_DT            (time) timedelta64[ns] 88B dask.array<chunksize=(1,), meta=np.ndarray>\n    time_bounds           (time, nbnd) object 176B dask.array<chunksize=(1, 2), meta=np.ndarray>\nAttributes:\n    NumFilesInSet:     1\n    title:             MOM6 diagnostic fields table for CESM case: marbl.bio....\n    associated_files:  areacello: marbl.bio.croc.5.mom6.h.static.nc\n    grid_type:         regular\n    grid_tile:         N/A","content_type":"text/plain"}}},"children":[],"key":"wMznvzJE8R"}],"visibility":"show","key":"TGoCvbLWAS"}],"visibility":"show","key":"W9axCgc9fb"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.011274,"end_time":"2025-10-13T16:31:37.353131","exception":false,"start_time":"2025-10-13T16:31:37.341857","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Look at Regional Domain","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IexdlZ81ga"}],"identifier":"look-at-regional-domain","label":"Look at Regional Domain","html_id":"look-at-regional-domain","implicit":true,"key":"Hb1dmEZxLS"}],"visibility":"show","key":"IQmGbwwfTZ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:37.376084Z","iopub.status.busy":"2025-10-13T16:31:37.375924Z","iopub.status.idle":"2025-10-13T16:31:37.522147Z","shell.execute_reply":"2025-10-13T16:31:37.521769Z"},"papermill":{"duration":0.158857,"end_time":"2025-10-13T16:31:37.523075","exception":false,"start_time":"2025-10-13T16:31:37.364218","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"%matplotlib inline","visibility":"hide","key":"Q92NQSJEM5"},{"type":"outputs","id":"b1OUXRVLm9IqWH1jb_m3Y","children":[],"visibility":"show","key":"iyJBpUKhi1"}],"visibility":"show","key":"wVZMA10I7Y"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.011158,"end_time":"2025-10-13T16:31:37.545983","exception":false,"start_time":"2025-10-13T16:31:37.534825","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note: you may see some numpy divide by zero errors below. I dont why, but they arent an issue!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"t4eSJabhBr"}],"key":"fBi8VWCBtM"}],"visibility":"show","key":"vaeQWxOp8E"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:37.568872Z","iopub.status.busy":"2025-10-13T16:31:37.568658Z","iopub.status.idle":"2025-10-13T16:31:43.159530Z","shell.execute_reply":"2025-10-13T16:31:43.159017Z"},"papermill":{"duration":5.603155,"end_time":"2025-10-13T16:31:43.160215","exception":false,"start_time":"2025-10-13T16:31:37.557060","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"utils.visualizeRegionalDomain(static_data)","visibility":"hide","key":"SkKuQYxyk7"},{"type":"outputs","id":"vHbB8724qp47VZIZuuiAe","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"ab76b78aa4b9563f8be90dcd9f0bb7f1","path":"/build/ab76b78aa4b9563f8be90dcd9f0bb7f1.png"},"text/plain":{"content":"<Figure size 2800x1600 with 3 Axes>","content_type":"text/plain"}}},"children":[],"key":"R8hwsN6eTw"}],"visibility":"show","key":"IXSKcIdvjr"}],"visibility":"show","key":"vFuftvc51X"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.0161,"end_time":"2025-10-13T16:31:43.196197","exception":false,"start_time":"2025-10-13T16:31:43.180097","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plotting Regional MOM6 Output","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kIRbHRkm2x"}],"identifier":"plotting-regional-mom6-output","label":"Plotting Regional MOM6 Output","html_id":"plotting-regional-mom6-output","implicit":true,"key":"uEHcV6VwWk"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We will primarily look at the surface fields and some of the monthly full domain fields in this notebook.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"zxHyHb9zvs"}],"key":"S3VnBhIiuY"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Xarray comes with great default plotting wrappers that can do a lot! If you take an Xarray DataArray (one variable data structure) and call","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"qA9GTGhJrL"}],"key":"fRy5o3stnY"},{"type":"code","lang":"","value":"xr.DataArray.plot()","position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"key":"qb6Prq8YrS"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"it will usually do a pretty good job! Here well walk through some powerful ways to use this plot wrapper, and we provide some additional functions to help the plotting along!","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"IaArMQOQ7u"}],"key":"xC38td8kLp"}],"visibility":"show","key":"oCWU9qAcPE"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.01582,"end_time":"2025-10-13T16:31:43.228107","exception":false,"start_time":"2025-10-13T16:31:43.212287","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Simple plotting with Xarray","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IbmSZgfZ9C"}],"identifier":"simple-plotting-with-xarray","label":"Simple plotting with Xarray","html_id":"simple-plotting-with-xarray","implicit":true,"key":"HgjZaO1Y4G"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"By default, these files are all loaded in as Datasets which store a large set of variables with a variety of shared coordinates/dimensions.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CxABnZLWMU"}],"key":"BcPuo62MWb"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"When plotting, we need to reduce this space to a single variable. If we want to plot a spatial field we need one time step, and if we want to plot a timeseries, we need to average over the spatial dimensions (this is a bit more complicated than it might seem because the grid cells are not all the same size).","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"DS42xxEbjr"}],"key":"yoAFBRFlAa"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Lets use some basic Xarray plotting to look at a surface field:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"v01NAC6C45"}],"key":"EmfxNl91sQ"}],"visibility":"show","key":"PQ6PW5HviU"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:43.260963Z","iopub.status.busy":"2025-10-13T16:31:43.260760Z","iopub.status.idle":"2025-10-13T16:31:45.482250Z","shell.execute_reply":"2025-10-13T16:31:45.481767Z"},"papermill":{"duration":2.239478,"end_time":"2025-10-13T16:31:45.483541","exception":false,"start_time":"2025-10-13T16:31:43.244063","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"## Select a single variable at a single time\nsst = sfc_data[\"tos\"].isel(time=0)\nsst.plot(cmap=\"viridis\", vmin=-1.9, vmax=30)  # approx. color bar bounds for temp\n# Note that it automatically labels with coordinate names and attributes.","visibility":"show","key":"bnKNdpZLgJ"},{"type":"outputs","id":"_L6ZWS_Y6nMzfHcjy-XOP","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"021be20e3d9a8732ab5a07ccddc64bce","path":"/build/021be20e3d9a8732ab5a07ccddc64bce.png"},"text/plain":{"content":"<Figure size 1280x960 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"xqisrJoUGk"}],"visibility":"show","key":"XttRitrrXj"}],"visibility":"show","key":"y4xEIAjn8a"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.020805,"end_time":"2025-10-13T16:31:45.527883","exception":false,"start_time":"2025-10-13T16:31:45.507078","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Looks good! But from above we know we want to plot with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wLJ15VhRFp"},{"type":"inlineCode","value":"geolon","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xyrpf6FCfe"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YHYYpGfO3W"},{"type":"inlineCode","value":"geolat","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qSSnapRwuu"},{"type":"text","value":" for an accurate map. We can also choose some different color maps and projections. Lets use some ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"t9eKb3R4pn"},{"type":"inlineCode","value":"regional_utils","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Mmj3jeokPo"},{"type":"text","value":" to get this done.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"G9G5KYJGLw"}],"key":"FlGJlZC3xZ"}],"visibility":"show","key":"OARfwe5ff3"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:45.573411Z","iopub.status.busy":"2025-10-13T16:31:45.573202Z","iopub.status.idle":"2025-10-13T16:31:47.889181Z","shell.execute_reply":"2025-10-13T16:31:47.888695Z"},"papermill":{"duration":2.341936,"end_time":"2025-10-13T16:31:47.890478","exception":false,"start_time":"2025-10-13T16:31:45.548542","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"## Select a single variable at a single time\nsst = sfc_data[\"tos\"].isel(time=0)\n\ncoords = utils.chooseGeoCoords(sst.dims)\nlat = static_data[coords[\"latitude\"]]\nlon = static_data[coords[\"longitude\"]]\n\nsst = sst.assign_coords({\"lon\": lon, \"lat\": lat})\n\ncmap = utils.chooseColorMap(sst.name)\n\ncbar_levels = utils.chooseColorLevels(\n    sst.min().compute().item(),\n    sst.max().compute().item(),\n)\n\n# Create the plot with projection\nfig = plt.figure(dpi=200)\nax = plt.axes(projection=ccrs.Mercator())\n\n# Plot the data\np = sst.plot(\n    x=\"lon\",\n    y=\"lat\",\n    cmap=cmap,\n    levels=cbar_levels,\n    transform=ccrs.PlateCarree(),\n    ax=ax,\n    add_colorbar=True,\n)\n\n# Add coastlines - now this should work\nax.coastlines(resolution=\"50m\", color=\"black\", linewidth=0.3)\n\nplt.show()","visibility":"show","key":"qZ50jx3KCQ"},{"type":"outputs","id":"R4al6PGzIbKhqW-EzRVa6","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b023e4ddd9b633ce33e400a02b6a3fc5","path":"/build/b023e4ddd9b633ce33e400a02b6a3fc5.png"},"text/plain":{"content":"<Figure size 1280x960 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"NxN4WBKqmR"}],"visibility":"show","key":"S5MOGddt6G"}],"visibility":"show","key":"UyQeviK5VU"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.020903,"end_time":"2025-10-13T16:31:47.935470","exception":false,"start_time":"2025-10-13T16:31:47.914567","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Looks good! Doing all this setup everytime would be cumbersome, so we wrapped it in a function ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MAqxfz4JNx"},{"type":"inlineCode","value":"utils.plotLatLonField","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KU0TfYoUfE"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eb0fJ8ZgGd"}],"key":"UfSo8O45FM"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Please go check it out and see whats going on behind the scenes. It also can calculate statistics for the field taking into account area/volume weights.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mtgZEEW3Kv"}],"key":"Mr2tkvrMXQ"}],"visibility":"show","key":"zHBcJZVBsS"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.020472,"end_time":"2025-10-13T16:31:47.976492","exception":false,"start_time":"2025-10-13T16:31:47.956020","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"MOM6 Output - Surface Fields","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ppyHe7IJcb"}],"identifier":"mom6-output-surface-fields","label":"MOM6 Output - Surface Fields","html_id":"mom6-output-surface-fields","implicit":true,"key":"LBkghWoP6y"}],"visibility":"show","key":"KnvZDC3hOG"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.020429,"end_time":"2025-10-13T16:31:48.017248","exception":false,"start_time":"2025-10-13T16:31:47.996819","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The cells below visualize the mean state and the std of the fields over the full time given.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Gu4QSZdWNs"}],"key":"CaFq2BHgsQ"}],"visibility":"show","key":"dLtyhMvq09"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:31:48.059577Z","iopub.status.busy":"2025-10-13T16:31:48.059402Z","iopub.status.idle":"2025-10-13T16:32:20.794544Z","shell.execute_reply":"2025-10-13T16:32:20.793924Z"},"papermill":{"duration":32.758002,"end_time":"2025-10-13T16:32:20.795849","exception":false,"start_time":"2025-10-13T16:31:48.037847","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"## Ploting basic surface state variables\nadd_stats = True\ntime_bounds = (\n    sfc_data[\"time\"][0].compute().item(),\n    sfc_data[\"time\"][-1].compute().item(),\n)\n\nfor var in sfc_variables:\n    if var not in list(sfc_data.variables):\n        print(f\"Variable '{var}' not in given sfc_data. It will not be plotted.\")\n        sfc_variables.remove(var)\n\n\nprint(f\"Taking mean and std dev from {time_bounds[0]} to {time_bounds[-1]}\")\nfor var in sfc_variables:\n    field = sfc_data[var]\n\n    coords = utils.chooseGeoCoords(field.dims)\n    areacello = utils.chooseAreacello(field.dims)\n\n    mean = field.mean(dim=\"time\", skipna=True).compute()\n    std = field.std(dim=\"time\", skipna=True).compute()\n    mean.attrs = field.attrs\n    std.attrs = field.attrs\n    mean.attrs[\"long_name\"] = f\"Mean {field.long_name}\"\n    std.attrs[\"long_name\"] = f\"Std Dev {field.long_name}\"\n\n    utils.plotLatLonField(\n        mean,\n        latitude=static_data[coords[\"latitude\"]],\n        longitude=static_data[coords[\"longitude\"]],\n        stats=add_stats,\n        area_weights=static_data[areacello],\n        save=save_figs,\n        save_path=image_output_dir,\n    )\n    plt.show()\n\n    utils.plotLatLonField(\n        std,\n        latitude=static_data[coords[\"latitude\"]],\n        longitude=static_data[coords[\"longitude\"]],\n        stats=add_stats,\n        area_weights=static_data[areacello],\n        save=save_figs,\n        save_path=image_output_dir,\n    )\n    plt.show()","visibility":"hide","key":"bAyq7gT83v"},{"type":"outputs","id":"J3x2JSocKVWBLwfn9EFce","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Taking mean and std dev from 1999-12-30 12:00:00 to 2000-11-28 12:00:00\n"},"children":[],"key":"NHQ7mLDVMK"},{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"/glade/work/ajanney/conda-envs/cupid-analysis/lib/python3.11/site-packages/dask/array/numpy_compat.py:57: RuntimeWarning: invalid value encountered in divide\n  x = np.divide(x1, x2, out)\n"},"children":[],"key":"CvKC3EH4nv"},{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"822e86f234680e7aeac6f8b1c519c4f1","path":"/build/822e86f234680e7aeac6f8b1c519c4f1.png"},"text/plain":{"content":"<Figure size 1280x960 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"iqiztxs4RI"},{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"0198e14434d6d2f3ca79744907fa4915","path":"/build/0198e14434d6d2f3ca79744907fa4915.png"},"text/plain":{"content":"<Figure size 1280x960 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"CAMj52AiB1"}],"visibility":"show","key":"TxyGOYFdwz"}],"visibility":"show","key":"Y4koJpDgOo"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.029105,"end_time":"2025-10-13T16:32:20.853563","exception":false,"start_time":"2025-10-13T16:32:20.824458","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Area Weighted Averages and Timeseries","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yfcY2xTm8j"}],"identifier":"area-weighted-averages-and-timeseries","label":"Area Weighted Averages and Timeseries","html_id":"area-weighted-averages-and-timeseries","implicit":true,"key":"dycXXyXoRQ"}],"visibility":"show","key":"ufEDd0zAwZ"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.024608,"end_time":"2025-10-13T16:32:20.903210","exception":false,"start_time":"2025-10-13T16:32:20.878602","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculating and plotting timeseries can also be complicated. We need to be careful when taking an average of the fields that we take weighted statistics because the grid cells are not guaranteed to be constant area or volume.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ibTIRzgwF2"}],"key":"sEnl7Ugp0P"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The information we need for these weighted averages is contained in the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OAf7t1JTpy"},{"type":"inlineCode","value":"areacello*","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YDH3BPMM4G"},{"type":"text","value":" variables (in static_data) and the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jT51ImwwYV"},{"type":"inlineCode","value":"volcello","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QHpmZOLyfa"},{"type":"text","value":" variable (in native_data and monthly_data).","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"t8poHI9gjV"}],"key":"Hzy7MY3zGX"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We have to pay attention to coordinates and dimensions because of MOM6s staggered grid (see how we choose the geolon/lat coords above).","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"foAbSTuPYJ"}],"key":"UED3MBEQPt"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Note:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"aFKxPQTFP7"}],"key":"gBB9j8NCBy"},{"type":"text","value":" These timeseries may be less helpful for shorter runs, but see what they reveal!","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"VhCa2V2ute"}],"key":"SGMyjmEACG"}],"visibility":"show","key":"ELCBnNhbhs"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:32:20.954510Z","iopub.status.busy":"2025-10-13T16:32:20.954234Z","iopub.status.idle":"2025-10-13T16:32:35.135093Z","shell.execute_reply":"2025-10-13T16:32:35.134754Z"},"papermill":{"duration":14.207422,"end_time":"2025-10-13T16:32:35.135703","exception":false,"start_time":"2025-10-13T16:32:20.928281","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"for var in sfc_variables:\n    field = sfc_data[var]\n    areacello_var = utils.chooseAreacello(field.dims)\n\n    utils.plotAvgTimeseries(\n        sfc_data[var],\n        static_data[areacello_var],\n        save=save_figs,\n        save_path=image_output_dir,\n    )","visibility":"hide","key":"O1ehlzZM3d"},{"type":"outputs","id":"hCbr8ALdXEGDvkuiXW-8M","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"57204a41af23375821b324275f8d498d","path":"/build/57204a41af23375821b324275f8d498d.png"},"text/plain":{"content":"<Figure size 1280x960 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"hKZnX6WkxQ"}],"visibility":"show","key":"vWpGGsbVTv"}],"visibility":"show","key":"BRQmLSZDWc"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.024689,"end_time":"2025-10-13T16:32:35.188928","exception":false,"start_time":"2025-10-13T16:32:35.164239","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Viewing Full Domain Monthly Output","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SmnZEqat5A"}],"identifier":"viewing-full-domain-monthly-output","label":"Viewing Full Domain Monthly Output","html_id":"viewing-full-domain-monthly-output","implicit":true,"key":"hQjZdjoPjN"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Lets look at the monthly output. When using longer runs (years or decades). These hold a lot more information about how your model is evolving and performing over time. For shorter runs (like many regional models often are), we may only have a handful of monthly output timesteps.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"c0yMUuHxz3"}],"key":"njOHB6RQ1l"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Xarray has some very useful methods for visualizing multiple levels and easily plotting them using the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"S6aMJzttxS"},{"type":"inlineCode","value":"col","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bpaK60IybU"},{"type":"text","value":" and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Rt1vpVj1m5"},{"type":"inlineCode","value":"col_wrap","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ZJlgJdj5HW"},{"type":"text","value":" keywords.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ISL85H5okE"}],"key":"shEHiHTSjm"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"**Note: ** none of the following plots are saved. If you want to save them, rerun the first few cells of the notebook and manually save these.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"PoXWvQ2Lqr"}],"key":"rssBZ2H9wK"}],"visibility":"show","key":"Ikhmy3EBCV"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:32:35.238771Z","iopub.status.busy":"2025-10-13T16:32:35.238583Z","iopub.status.idle":"2025-10-13T16:33:07.203414Z","shell.execute_reply":"2025-10-13T16:33:07.202906Z"},"papermill":{"duration":32.044416,"end_time":"2025-10-13T16:33:07.257830","exception":false,"start_time":"2025-10-13T16:32:35.213414","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"for var in monthly_variables:\n    if var not in list(monthly_data.variables):\n        print(f\"Variable '{var}' not in given monthly_data. It will not be plotted.\")\n        monthly_variables.remove(var)\n\n## Let's only look at one variable for now (this plotting can be slow)\nfor var in monthly_variables[0:1]:\n    # Look at only the first time step for now\n    field = monthly_data[var].isel(time=0)\n\n    cmap = utils.chooseColorMap(var)\n    levels = utils.chooseColorLevels(\n        field.min().compute().item(),\n        field.max().compute().item(),\n    )\n\n    subplot_kwargs = {\n        \"projection\": ccrs.Mercator(),\n    }\n\n    p = field.plot(\n        col=\"z_l\",\n        col_wrap=5,\n        cmap=cmap,\n        levels=levels,\n        transform=ccrs.PlateCarree(),\n        subplot_kws=subplot_kwargs,\n    )\n    plt.suptitle(f\"{var} at depths\", y=1.0, fontsize=20)\n\n    for ax in p.axs.flat:\n        ax.coastlines(resolution=\"50m\", color=\"black\", linewidth=0.3)","visibility":"show","key":"HREnJUNPwl"},{"type":"outputs","id":"DqXSavng6E_PHkvO46Lug","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"d47a4de83a56d5b4edf94265d105faea","path":"/build/d47a4de83a56d5b4edf94265d105faea.png"},"text/plain":{"content":"<Figure size 3200x4200 with 36 Axes>","content_type":"text/plain"}}},"children":[],"key":"PERMj2Q68V"}],"visibility":"show","key":"x3vJ9s2a9R"}],"visibility":"show","key":"JfZP17vzuV"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.039236,"end_time":"2025-10-13T16:33:07.338016","exception":false,"start_time":"2025-10-13T16:33:07.298780","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Vertical Profiles","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"St37wceOtT"}],"identifier":"vertical-profiles","label":"Vertical Profiles","html_id":"vertical-profiles","implicit":true,"key":"hZ1aBxlECh"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Another useful tool, sometimes we want to look at the vertical profile of something like salinity or temperature. Be careful to use area weighted averages here. (This could be a tool in regional_utils, but its not too much code, you decide!)","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bR03wteK6I"}],"key":"EFZcTMNHI7"}],"visibility":"show","key":"FkBmrFQ81s"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:33:07.417314Z","iopub.status.busy":"2025-10-13T16:33:07.417074Z","iopub.status.idle":"2025-10-13T16:33:07.963843Z","shell.execute_reply":"2025-10-13T16:33:07.963453Z"},"papermill":{"duration":0.587367,"end_time":"2025-10-13T16:33:07.964493","exception":false,"start_time":"2025-10-13T16:33:07.377126","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"for var in monthly_variables[0:1]:  # only one variable again, make it more!\n    # Look at only the first time step for now\n    field = monthly_data[var].isel(time=0)\n\n    area_weights = utils.chooseAreacello(field.dims)\n    field_weighted = field.weighted(static_data[area_weights])\n\n    mean_vars = [dim for dim in field.dims if dim != \"z_l\"]\n    field_mean = field_weighted.mean(mean_vars)\n\n    field_mean.plot(y=\"z_l\", yincrease=False)","visibility":"show","key":"sDf8OBcvV8"},{"type":"outputs","id":"OeECbggCQQwjcucJNey7B","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f5b89d7e293101f476169851a5f7f4b9","path":"/build/f5b89d7e293101f476169851a5f7f4b9.png"},"text/plain":{"content":"<Figure size 1280x960 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"VAgON5Kvm9"}],"visibility":"show","key":"ZzvdXcde0Z"}],"visibility":"show","key":"zBcWbcvGAH"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.039886,"end_time":"2025-10-13T16:33:08.045241","exception":false,"start_time":"2025-10-13T16:33:08.005355","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Bonus: Interpolating Levels and Slices","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NGOuanbqPc"}],"identifier":"bonus-interpolating-levels-and-slices","label":"Bonus: Interpolating Levels and Slices","html_id":"bonus-interpolating-levels-and-slices","implicit":true,"key":"m3iRX624UE"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We successfully plotted different levels above, we can also plot vertical slices. In both cases, we might run into an issue where we want to interpolate to a depth or lat/lon that is not explicitly resolved in the model. We can write our own tailored methods for this, but for simple visual inspection/comparison Xarray tools work well!","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"sguwHLf8vP"}],"key":"UlPrcORUYl"}],"visibility":"show","key":"M5xbYqbOzU"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:33:08.125539Z","iopub.status.busy":"2025-10-13T16:33:08.125314Z","iopub.status.idle":"2025-10-13T16:33:08.233305Z","shell.execute_reply":"2025-10-13T16:33:08.232975Z"},"papermill":{"duration":0.148911,"end_time":"2025-10-13T16:33:08.233865","exception":false,"start_time":"2025-10-13T16:33:08.084954","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"monthly_data[\"z_l\"]","visibility":"show","key":"r1Yzls6FJY"},{"type":"outputs","id":"uxSluYoVS87xMJtQbCR-9","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":19,"metadata":{},"data":{"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;z_l&#x27; (z_l: 35)&gt; Size: 280B\narray([2.5000e+00, 1.0000e+01, 2.0000e+01, 3.2500e+01, 5.1250e+01, 7.5000e+01,\n       1.0000e+02, 1.2500e+02, 1.5625e+02, 2.0000e+02, 2.5000e+02, 3.1250e+02,\n       4.0000e+02, 5.0000e+02, 6.0000e+02, 7.0000e+02, 8.0000e+02, 9.0000e+02,\n       1.0000e+03, 1.1000e+03, 1.2000e+03, 1.3000e+03, 1.4000e+03, 1.5375e+03,\n       1.7500e+03, 2.0625e+03, 2.5000e+03, 3.0000e+03, 3.5000e+03, 4.0000e+03,\n       4.5000e+03, 5.0000e+03, 5.5000e+03, 6.0000e+03, 6.5000e+03])\nCoordinates:\n  * z_l      (z_l) float64 280B 2.5 10.0 20.0 32.5 ... 5.5e+03 6e+03 6.5e+03\nAttributes:\n    units:      meters\n    long_name:  Depth at cell center\n    axis:       Z\n    positive:   down\n    edges:      z_i</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'z_l'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>z_l</span>: 35</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-0c83b77d-a087-49d4-9980-0f640936e04b' class='xr-array-in' type='checkbox' checked><label for='section-0c83b77d-a087-49d4-9980-0f640936e04b' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>2.5 10.0 20.0 32.5 51.25 75.0 ... 4.5e+03 5e+03 5.5e+03 6e+03 6.5e+03</span></div><div class='xr-array-data'><pre>array([2.5000e+00, 1.0000e+01, 2.0000e+01, 3.2500e+01, 5.1250e+01, 7.5000e+01,\n       1.0000e+02, 1.2500e+02, 1.5625e+02, 2.0000e+02, 2.5000e+02, 3.1250e+02,\n       4.0000e+02, 5.0000e+02, 6.0000e+02, 7.0000e+02, 8.0000e+02, 9.0000e+02,\n       1.0000e+03, 1.1000e+03, 1.2000e+03, 1.3000e+03, 1.4000e+03, 1.5375e+03,\n       1.7500e+03, 2.0625e+03, 2.5000e+03, 3.0000e+03, 3.5000e+03, 4.0000e+03,\n       4.5000e+03, 5.0000e+03, 5.5000e+03, 6.0000e+03, 6.5000e+03])</pre></div></div></li><li class='xr-section-item'><input id='section-9dcef442-f99e-4cee-af93-541f9436f8a3' class='xr-section-summary-in' type='checkbox'  checked><label for='section-9dcef442-f99e-4cee-af93-541f9436f8a3' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>z_l</span></div><div class='xr-var-dims'>(z_l)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>2.5 10.0 20.0 ... 6e+03 6.5e+03</div><input id='attrs-366c51e9-e631-4690-bf63-88204e3f16b3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-366c51e9-e631-4690-bf63-88204e3f16b3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-de0492a6-9b72-4d51-b127-5d7280ea3ecb' class='xr-var-data-in' type='checkbox'><label for='data-de0492a6-9b72-4d51-b127-5d7280ea3ecb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>meters</dd><dt><span>long_name :</span></dt><dd>Depth at cell center</dd><dt><span>axis :</span></dt><dd>Z</dd><dt><span>positive :</span></dt><dd>down</dd><dt><span>edges :</span></dt><dd>z_i</dd></dl></div><div class='xr-var-data'><pre>array([2.5000e+00, 1.0000e+01, 2.0000e+01, 3.2500e+01, 5.1250e+01, 7.5000e+01,\n       1.0000e+02, 1.2500e+02, 1.5625e+02, 2.0000e+02, 2.5000e+02, 3.1250e+02,\n       4.0000e+02, 5.0000e+02, 6.0000e+02, 7.0000e+02, 8.0000e+02, 9.0000e+02,\n       1.0000e+03, 1.1000e+03, 1.2000e+03, 1.3000e+03, 1.4000e+03, 1.5375e+03,\n       1.7500e+03, 2.0625e+03, 2.5000e+03, 3.0000e+03, 3.5000e+03, 4.0000e+03,\n       4.5000e+03, 5.0000e+03, 5.5000e+03, 6.0000e+03, 6.5000e+03])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-8c0fed0a-e559-4e83-91a4-fc752ee01f2a' class='xr-section-summary-in' type='checkbox'  ><label for='section-8c0fed0a-e559-4e83-91a4-fc752ee01f2a' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>z_l</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-754b1c71-dd6c-423c-80e9-ca629075958f' class='xr-index-data-in' type='checkbox'/><label for='index-754b1c71-dd6c-423c-80e9-ca629075958f' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   2.5,   10.0,   20.0,   32.5,  51.25,   75.0,  100.0,  125.0, 156.25,\n        200.0,  250.0,  312.5,  400.0,  500.0,  600.0,  700.0,  800.0,  900.0,\n       1000.0, 1100.0, 1200.0, 1300.0, 1400.0, 1537.5, 1750.0, 2062.5, 2500.0,\n       3000.0, 3500.0, 4000.0, 4500.0, 5000.0, 5500.0, 6000.0, 6500.0],\n      dtype=&#x27;float64&#x27;, name=&#x27;z_l&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-20883694-e14d-464a-aad7-06fde3150475' class='xr-section-summary-in' type='checkbox'  checked><label for='section-20883694-e14d-464a-aad7-06fde3150475' class='xr-section-summary' >Attributes: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>meters</dd><dt><span>long_name :</span></dt><dd>Depth at cell center</dd><dt><span>axis :</span></dt><dd>Z</dd><dt><span>positive :</span></dt><dd>down</dd><dt><span>edges :</span></dt><dd>z_i</dd></dl></div></li></ul></div></div>","content_type":"text/html"},"text/plain":{"content":"<xarray.DataArray 'z_l' (z_l: 35)> Size: 280B\narray([2.5000e+00, 1.0000e+01, 2.0000e+01, 3.2500e+01, 5.1250e+01, 7.5000e+01,\n       1.0000e+02, 1.2500e+02, 1.5625e+02, 2.0000e+02, 2.5000e+02, 3.1250e+02,\n       4.0000e+02, 5.0000e+02, 6.0000e+02, 7.0000e+02, 8.0000e+02, 9.0000e+02,\n       1.0000e+03, 1.1000e+03, 1.2000e+03, 1.3000e+03, 1.4000e+03, 1.5375e+03,\n       1.7500e+03, 2.0625e+03, 2.5000e+03, 3.0000e+03, 3.5000e+03, 4.0000e+03,\n       4.5000e+03, 5.0000e+03, 5.5000e+03, 6.0000e+03, 6.5000e+03])\nCoordinates:\n  * z_l      (z_l) float64 280B 2.5 10.0 20.0 32.5 ... 5.5e+03 6e+03 6.5e+03\nAttributes:\n    units:      meters\n    long_name:  Depth at cell center\n    axis:       Z\n    positive:   down\n    edges:      z_i","content_type":"text/plain"}}},"children":[],"key":"kPYMCm3G0e"}],"visibility":"show","key":"RBwLmsYYCo"}],"visibility":"show","key":"a9mBS0Skwu"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:33:08.315575Z","iopub.status.busy":"2025-10-13T16:33:08.315425Z","iopub.status.idle":"2025-10-13T16:33:10.469985Z","shell.execute_reply":"2025-10-13T16:33:10.469614Z"},"papermill":{"duration":2.196974,"end_time":"2025-10-13T16:33:10.471645","exception":false,"start_time":"2025-10-13T16:33:08.274671","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"## Plot a specific depth\nfield = monthly_data[\"thetao\"].isel(time=0)\nfield = field.interp(\n    z_l=550, method=\"linear\"\n)  # you may choose a different depth if you want to test the interpolation\n\ncoords = utils.chooseGeoCoords(field.dims)\nareacello = utils.chooseAreacello(field.dims)\n\nutils.plotLatLonField(\n    field,\n    latitude=static_data[coords[\"latitude\"]],\n    longitude=static_data[coords[\"longitude\"]],\n    stats=True,\n    area_weights=static_data[areacello],\n    save=save_figs,\n    save_path=image_output_dir,\n)\nplt.show()","visibility":"show","key":"NhZkcXmwOt"},{"type":"outputs","id":"zQ5r6K-6uZYNqAj8rGT_j","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"2e29d8f8e9082b49b2d20afb4329363f","path":"/build/2e29d8f8e9082b49b2d20afb4329363f.png"},"text/plain":{"content":"<Figure size 1280x960 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"EeNr2GDRe3"}],"visibility":"show","key":"nbPrQpnliz"}],"visibility":"show","key":"hFkIbgzUzk"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.042254,"end_time":"2025-10-13T16:33:10.557213","exception":false,"start_time":"2025-10-13T16:33:10.514959","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Lets try it with a vertical slice now too!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zQRvLUXq0p"}],"identifier":"lets-try-it-with-a-vertical-slice-now-too","label":"Lets try it with a vertical slice now too!","html_id":"lets-try-it-with-a-vertical-slice-now-too","implicit":true,"key":"fR1ggHoyTL"}],"visibility":"show","key":"vCnJo2yWzH"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-10-13T16:33:10.641974Z","iopub.status.busy":"2025-10-13T16:33:10.641770Z","iopub.status.idle":"2025-10-13T16:33:11.227155Z","shell.execute_reply":"2025-10-13T16:33:11.226800Z"},"papermill":{"duration":0.628327,"end_time":"2025-10-13T16:33:11.227747","exception":false,"start_time":"2025-10-13T16:33:10.599420","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"field = monthly_data[\"thetao\"].isel(time=0)\nx_var = \"xh\" if \"xh\" in field.dims else \"xq\"\nlongitude = np.mean(field[x_var].to_numpy())\nvertical = field.interp({x_var: longitude})\nlevels = np.linspace(\n    vertical.min().compute().item(), vertical.max().compute().item(), 35\n)\nvertical.plot(\n    yincrease=False,\n    levels=levels,\n)","visibility":"show","key":"QSh5K9wsbE"},{"type":"outputs","id":"zl_Bj4B9di3HGYXHacC6z","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"aa0dbbac3fd993494bb686ed8ab6c689","path":"/build/aa0dbbac3fd993494bb686ed8ab6c689.png"},"text/plain":{"content":"<Figure size 1280x960 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"Fd0ajmGrhX"}],"visibility":"show","key":"raHIfYXkmW"}],"visibility":"show","key":"ZMl8WFNRbc"}],"key":"FsHxq0ayj5"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Output from CUPiD Example","url":"/notebooks/diagnostics/cupid-output","group":"Basic CrocoDash Tutorial"},"next":{"title":"Regional Ocean: Animations of Surface Fields","url":"/notebooks/diagnostics/cupid-output/regional-ocean-animations","group":"Basic CrocoDash Tutorial"}}},"domain":"http://localhost:3000"}